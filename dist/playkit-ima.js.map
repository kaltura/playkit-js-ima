{"version":3,"sources":["./ima/webpack/universalModuleDefinition","./ima/webpack/bootstrap ab2d8f5713007940ded8","./ima/./state.js","./ima/external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":\"Playkit\"}","./ima/./ima.js","./ima/./ima-middleware.js","./ima/./ima-state-machine.js","./ima/../node_modules/javascript-state-machine/lib/state-machine.js","./ima/../node_modules/javascript-state-machine/lib/history.js"],"names":["State","LOADING","LOADED","PLAYING","PAUSED","IDLE","DONE","pluginName","ADS_CONTAINER_ID","Ima","name","player","config","_stateMachine","_intervalTimer","_videoLastCurrentTime","_adsManager","_contentComplete","_hasUserAction","_isAdsManagerLoaded","_contentPlayheadTracker","currentTime","previousTime","seeking","duration","_addBindings","_init","adTagUrl","logger","warn","debug","getAdSkippableState","skip","skipSupport","stop","_nextPromise","Object","defer","resume","pause","eventManager","destroy","_stopAdInterval","_hideAdsContainer","_adsLoader","contentComplete","_currentAd","_adDisplayContainer","initialize","_startAdsManager","adError","error","playerViewSize","_getPlayerViewSize","init","width","height","_sdk","ViewMode","NORMAL","start","forEach","listen","document","fullScreenEvent","_resizeAd","bind","window","Event","VOLUME_CHANGE","_syncPlayerVolume","SOURCE_SELECTED","event","selectedSource","payload","length","_contentSrc","url","loadPromise","_isImaSDKLibLoaded","Promise","resolve","Dom","loadScriptAsync","IMA_SDK_DEBUG_LIB_URL","IMA_SDK_LIB_URL","then","google","ima","VERSION","_initImaSettings","_initAdsContainer","_initAdsLoader","_requestAds","loaded","catch","e","reject","settings","setPlayerType","playerName","setPlayerVersion","playerVersion","setVpaidAllowed","setVpaidMode","ImaSdkSettings","VpaidMode","ENABLED","adsContainerDiv","getElementById","playerView","getView","_adsContainerDiv","createElement","id","style","position","top","appendChild","AdDisplayContainer","getVideoElement","AdsLoader","addEventListener","AdsManagerLoadedEvent","Type","ADS_MANAGER_LOADED","_onAdsManagerLoaded","AdErrorEvent","AD_ERROR","aderror","adEvent","adsResponse","adsRequest","AdsRequest","linearAdSlotWidth","linearAdSlotHeight","nonLinearAdSlotWidth","nonLinearAdSlotHeight","requestAds","isFullScreen","_isFullScreen","viewMode","FULLSCREEN","resize","fullscreenElement","Boolean","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","parseInt","getComputedStyle","enabled","LOADED_METADATA","_onLoadedMetadata","TIME_UPDATE","_onMediaTimeUpdate","SEEKING","_onMediaSeeking","SEEKED","_onMediaSeeked","unlisten","enable","ENDED","_onMediaEnded","isCustomPlaybackUsed","isLinear","display","adsManagerLoadedEvent","adsRenderingSettings","AdsRenderingSettings","keys","setting","getAdsManager","_attachAdsManagerListeners","AdEvent","CONTENT_PAUSE_REQUESTED","adbreakstart","adloaded","STARTED","adstarted","adpaused","RESUMED","adresumed","FIRST_QUARTILE","adfirstquartile","MIDPOINT","admidpoint","THIRD_QUARTILE","adthirdquartile","CLICK","adclicked","SKIPPED","adskipped","COMPLETE","adcompleted","CONTENT_RESUME_REQUESTED","adbreakend","ALL_ADS_COMPLETED","alladscompleted","USER_CLOSE","userclosedad","VOLUME_CHANGED","advolumechanged","VOLUME_MUTED","admuted","LOG","muted","setVolume","volume","setInterval","is","remainingTime","getRemainingTime","getCurrentAd","getDuration","Number","isNumber","dispatchEvent","AD_PROGRESS","adProgress","clearInterval","companions","googletag","companionsIds","i","sizeCriteria","companionAds","selectionCriteria","CompanionAdSelectionSettings","resourceType","ResourceType","ALL","creativeType","CreativeType","toLowerCase","SizeCriteria","SELECT_NEAR_MATCH","IGNORE","SELECT_EXACT_MATCH","getCompanionAds","companionAd","content","getContent","el","innerHTML","defaultConfig","restoreCustomPlaybackStateOnAdBreakComplete","enablePreloading","useStyledLinearAds","useStyledNonLinearAds","bitrate","autoAlign","ImaMiddleware","context","_context","next","_isPlayerLoaded","load","sm","getStateMachine","state","initialUserAction","callNext","resumeAd","pauseAd","ImaStateMachine","transitions","from","to","AD_STARTED","ad","getAd","AD_RESUMED","AD_PAUSED","AD_SKIPPED","AD_COMPLETED","AD_BREAK_END","AD_LOADED","AD_FIRST_QUARTILE","AD_BREAK_START","AD_MIDPOINT","AD_THIRD_QUARTILE","USER_CLOSED_AD","AD_VOLUME_CHANGED","AD_MUTED","AD_CLICKED","methods","onAdloaded","onAdLoaded","onAdstarted","onAdStarted","onAdpaused","onAdPaused","onAdresumed","onAdEvent","onAdclicked","onAdClicked","onAdskipped","onAdSkipped","onAdcompleted","onAdCompleted","onAlladscompleted","onAllAdsCompleted","onAdbreakstart","onAdBreakStart","onAdbreakend","onAdBreakEnd","onAdfirstquartile","onAdmidpoint","onAdthirdquartile","onAderror","onAdError","onUserclosedad","onAdvolumechanged","onAdmuted","onEnterState","plugins","options","type","toUpperCase","transition","normalizeAdEvent","_maybeDisplayCompanionAds","_setContentPlayheadTrackerEventsEnabled","_setVideoEndedCallbackEnabled","_resolveNextPromise","play","_startAdInterval","paused","call","src","_showAdsContainer","_maybeSaveVideoCurrentTime","_maybeSetVideoCurrentTime","getError","normalizeAdError","adData","getAdData","getMessage","fatal","code","getErrorCode","message","extraAdData"],"mappings":"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;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,mBAAmB;AAChC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB;AACjB;AACA,GAAG;;AAEH;AACA;AACA,wCAAwC,uBAAuB,yBAAyB;AACxF;AACA;AACA,wCAAwC,6BAA6B,eAAe;AACpF;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,yBAAyB,aAAa;AACtC;AACA,yBAAyB,WAAW;AACpC,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC,4BAA4B,+CAA+C;AAC3E;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,6BAA6B;;AAE7B;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,qCAAqC,qBAAqB,kBAAkB;AAC5E,qCAAqC,sBAAsB,eAAe,EAAE;AAC5E,qCAAqC,sBAAsB,cAAc,GAAG;AAC5E,qCAAqC,2BAA2B,YAAY;;AAE5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,sCAAsC;AACtC;AACA,UAAU,UAAU;AACpB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA,CAAC,E;;;;;;AC5pBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,cAAc;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,8DAA8D,+DAA+D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,mBAAmB;AAChC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,kBAAkB;AAClB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA,CAAC,E","file":"playkit-ima.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PlaykitJsIma\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"PlaykitJsIma\"] = factory(root[\"Playkit\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ab2d8f5713007940ded8","// @flow\n\n/**\n * The ima plugin possible states.\n * @type {Object}\n */\nconst State: { [state: string]: string } = {\n  LOADING: \"loading\",\n  LOADED: \"loaded\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  IDLE: \"idle\",\n  DONE: \"done\"\n};\n\nexport default State;\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":\"Playkit\"}\n// module id = 1\n// module chunks = 0","// @flow\nimport ImaMiddleware from './ima-middleware'\nimport ImaStateMachine from './ima-state-machine'\nimport State from './state'\nimport {registerPlugin, BasePlugin} from 'playkit-js'\nimport {BaseMiddleware} from 'playkit-js'\nimport {Utils} from 'playkit-js'\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\nconst pluginName: string = \"ima\";\n/**\n * The ads container id.\n * @type {string}\n * @const\n */\nconst ADS_CONTAINER_ID: string = \"ads-container\";\n\n/**\n * The ima plugin.\n * @classdesc\n */\nexport default class Ima extends BasePlugin {\n\n  /**\n   * The default configuration of the plugin.\n   * @type {Object}\n   * @static\n   */\n  static defaultConfig: Object = {\n    debug: false,\n    companions: {},\n    adsRenderingSettings: {\n      restoreCustomPlaybackStateOnAdBreakComplete: true,\n      enablePreloading: false,\n      useStyledLinearAds: false,\n      useStyledNonLinearAds: true,\n      bitrate: -1,\n      autoAlign: true\n    }\n  };\n\n  /**\n   * The sdk lib url.\n   * @type {string}\n   * @static\n   */\n  static IMA_SDK_LIB_URL: string = \"//imasdk.googleapis.com/js/sdkloader/ima3.js\";\n  /**\n   * The debug sdk lib url.\n   * @type {string}\n   * @static\n   */\n  static IMA_SDK_DEBUG_LIB_URL: string = \"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js\";\n  /**\n   * Promise for loading the plugin.\n   * Will be resolved after:\n   * 1) Ima script has been loaded in the page.\n   * 2) The ads manager has been loaded and ready to start.\n   * @type {Promise<*>}\n   * @member\n   * @public\n   */\n  loadPromise: DeferredPromise;\n  /**\n   * The finite state machine of the plugin.\n   * @member\n   * @private\n   */\n  _stateMachine: any;\n  /**\n   * The sdk api.\n   * @member\n   * @private\n   */\n  _sdk: any;\n  /**\n   * The ads container dom element.\n   * @member\n   * @private\n   */\n  _adsContainerDiv: HTMLElement;\n  /**\n   * The ima ads container object.\n   */\n  _adDisplayContainer: any;\n  /**\n   * The ima ads manager.\n   * @member\n   * @private\n   */\n  _adsManager: any;\n  /**\n   * The ima ads loader.\n   * @member\n   * @private\n   */\n  _adsLoader: any;\n  /**\n   * The content tracker.\n   * @member\n   * @private\n   */\n  _contentPlayheadTracker: Object;\n  /**\n   * Flag to know when content complete.\n   * @member\n   * @private\n   */\n  _contentComplete: boolean;\n  /**\n   * The ad interval timer.\n   * @member\n   * @private\n   */\n  _intervalTimer: ?number;\n  /**\n   * Video current time before ads.\n   * On custom playback when only one video tag playing, save the video current time.\n   * @member\n   * @private\n   */\n  _videoLastCurrentTime: ?number;\n  /**\n   * The promise which when resolved starts the next handler in the middleware chain.\n   * @member\n   * @private\n   */\n  _nextPromise: ?DeferredPromise;\n  /**\n   * The current playing ad.\n   * @member\n   * @private\n   */\n  _currentAd: any;\n  /**\n   * The content media src.\n   * @member\n   * @private\n   */\n  _contentSrc: string;\n  /**\n   * Whether an initial user action happened.\n   * @member\n   * @private\n   */\n  _hasUserAction: boolean;\n  /**\n   * Whether the ads manager loaded.\n   * @member\n   * @private\n   */\n  _isAdsManagerLoaded: boolean;\n\n  /**\n   * Whether the ima plugin is valid.\n   * @static\n   * @override\n   * @public\n   */\n  static isValid() {\n    return true;\n  }\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  constructor(name: string, player: Player, config: Object) {\n    super(name, player, config);\n    this._stateMachine = new ImaStateMachine(this);\n    this._intervalTimer = null;\n    this._videoLastCurrentTime = null;\n    this._adsManager = null;\n    this._contentComplete = false;\n    this._hasUserAction = false;\n    this._isAdsManagerLoaded = false;\n    this._contentPlayheadTracker = {currentTime: 0, previousTime: 0, seeking: false, duration: 0};\n    this._addBindings();\n    this._init();\n  }\n\n  /**\n   * TODO: Rethink on design and implementation.\n   * Plays ad on demand.\n   * @param {string} adTagUrl - The ad tag url to play.\n   * @returns {void}\n   */\n  playAdNow(adTagUrl: string): void {\n    this.logger.warn(\"playAdNow API is not implemented yet\", adTagUrl);\n  }\n\n  /**\n   * Skips on an ad.\n   * @returns {void}\n   */\n  skipAd(): void {\n    this.logger.debug(\"Skip ad\");\n    if (this._adsManager) {\n      if (this._adsManager.getAdSkippableState()) {\n        this._adsManager.skip();\n      } else if (this.config.skipSupport) {\n        this._adsManager.stop();\n      }\n    }\n  }\n\n  /**\n   * Resuming the ad.\n   * @public\n   * @returns {DeferredPromise} - The promise which when resolved starts the next handler in the middleware chain.\n   */\n  resumeAd(): ?DeferredPromise {\n    this.logger.debug(\"Resume ad\");\n    this._nextPromise = Utils.Object.defer();\n    this._adsManager.resume();\n    return this._nextPromise;\n  }\n\n  /**\n   * Pausing the ad.\n   * @public\n   * @returns {DeferredPromise} - The promise which when resolved starts the next handler in the middleware chain.\n   */\n  pauseAd(): ?DeferredPromise {\n    this.logger.debug(\"Pause ad\");\n    this._nextPromise = Utils.Object.defer();\n    this._adsManager.pause();\n    return this._nextPromise;\n  }\n\n  /**\n   * Gets the state machine.\n   * @public\n   * @returns {any} - The state machine.\n   */\n  getStateMachine(): any {\n    return this._stateMachine;\n  }\n\n  /**\n   * Gets the middleware.\n   * @public\n   * @returns {ImaMiddleware} - The middleware api.\n   */\n  getMiddlewareImpl(): BaseMiddleware {\n    return new ImaMiddleware(this);\n  }\n\n  /**\n   * Destroys the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.logger.debug(\"destroy\");\n    this.eventManager.destroy();\n    this._stopAdInterval();\n    this._hideAdsContainer();\n    if (this._adsManager) {\n      this._adsManager.destroy();\n    }\n    if (this._adsLoader && !this._contentComplete) {\n      this._adsLoader.contentComplete();\n    }\n    this._currentAd = null;\n    this._adsManager = null;\n    this._adsLoader = null;\n    this._contentComplete = false;\n    this._hasUserAction = false;\n    this._isAdsManagerLoaded = false;\n    this._intervalTimer = null;\n    this._videoLastCurrentTime = null;\n    this._contentPlayheadTracker = {currentTime: 0, previousTime: 0, seeking: false, duration: 0};\n  }\n\n  /**\n   * Initialize the ads for the first time.\n   * @public\n   * @returns {?DeferredPromise} - The promise which when resolved starts the next handler in the middleware chain.\n   */\n  initialUserAction(): ?DeferredPromise {\n    try {\n      this.logger.debug(\"Initial user action\");\n      this._nextPromise = Utils.Object.defer();\n      this._adDisplayContainer.initialize();\n      this._hasUserAction = true;\n      if (this._isAdsManagerLoaded) {\n        this.logger.debug(\"User action occurred after ads manager loaded\");\n        this._startAdsManager();\n      }\n    } catch (adError) {\n      this.logger.error(adError);\n      this.destroy();\n    }\n    return this._nextPromise;\n  }\n\n  /**\n   * Starts the ads manager.\n   * @private\n   * @returns {void}\n   */\n  _startAdsManager(): void {\n    let playerViewSize = this._getPlayerViewSize();\n    this.logger.debug(\"Start ads manager\");\n    this._adsManager.init(playerViewSize.width, playerViewSize.height, this._sdk.ViewMode.NORMAL);\n    this._adsManager.start();\n  }\n\n  /**\n   * Adding bindings.\n   * @private_addBindings\n   * @returns {void}\n   */\n  _addBindings(): void {\n    [\n      'fullscreenchange',\n      'mozfullscreenchange',\n      'webkitfullscreenchange'\n    ].forEach(fullScreenEvent => this.eventManager.listen(document, fullScreenEvent, this._resizeAd.bind(this)));\n    this.eventManager.listen(window, 'resize', this._resizeAd.bind(this));\n    this.eventManager.listen(this.player, this.player.Event.VOLUME_CHANGE, this._syncPlayerVolume.bind(this));\n    this.eventManager.listen(this.player, this.player.Event.SOURCE_SELECTED, (event) => {\n      let selectedSource = event.payload.selectedSource;\n      if (selectedSource && selectedSource.length > 0) {\n        this._contentSrc = selectedSource[0].url;\n      }\n    });\n  }\n\n  /**\n   * Initializing the plugin.\n   * @private\n   * @returns {void}\n   */\n  _init(): void {\n    this.loadPromise = Utils.Object.defer();\n    (this._isImaSDKLibLoaded()\n      ? Promise.resolve()\n      : Utils.Dom.loadScriptAsync(this.config.debug ? Ima.IMA_SDK_DEBUG_LIB_URL : Ima.IMA_SDK_LIB_URL))\n      .then(() => {\n        this._sdk = window.google.ima;\n        this.logger.debug(\"IMA SDK version: \" + this._sdk.VERSION);\n        this._initImaSettings();\n        this._initAdsContainer();\n        this._initAdsLoader();\n        this._requestAds();\n        this._stateMachine.loaded();\n        this.loadPromise.resolve();\n      })\n      .catch((e) => {\n        this.loadPromise.reject(e);\n      });\n  }\n\n  /**\n   * Checks for ima sdk lib availability.\n   * @returns {boolean} - Whether ima sdk lib is loaded.\n   * @private\n   */\n  _isImaSDKLibLoaded(): boolean {\n    return (window.google && window.google.ima && window.google.ima.VERSION);\n  }\n\n  /**\n   * Init ima settings.\n   * @private\n   * @returns {void}\n   */\n  _initImaSettings(): void {\n    this._sdk.settings.setPlayerType(this.config.playerName);\n    this._sdk.settings.setPlayerVersion(this.config.playerVersion);\n    this._sdk.settings.setVpaidAllowed(true);\n    this._sdk.settings.setVpaidMode(this._sdk.ImaSdkSettings.VpaidMode.ENABLED);\n  }\n\n  /**\n   * Initializing the ad container.\n   * @private\n   * @returns {void}\n   */\n  _initAdsContainer(): void {\n    this.logger.debug(\"Init ads container\");\n    let adsContainerDiv = Utils.Dom.getElementById(ADS_CONTAINER_ID);\n    if (!adsContainerDiv) {\n      let playerView = this.player.getView();\n      this._adsContainerDiv = Utils.Dom.createElement('div');\n      this._adsContainerDiv.id = ADS_CONTAINER_ID + playerView.id;\n      this._adsContainerDiv.style.position = \"absolute\";\n      this._adsContainerDiv.style.top = \"0px\";\n      Utils.Dom.appendChild(playerView, this._adsContainerDiv);\n    } else {\n      this._adsContainerDiv = adsContainerDiv;\n    }\n    this._adDisplayContainer = new this._sdk.AdDisplayContainer(this._adsContainerDiv, this.player.getVideoElement());\n  }\n\n  /**\n   * Initializing the ads loader.\n   * @private\n   * @returns {void}\n   */\n  _initAdsLoader(): void {\n    this.logger.debug(\"Init ads loader\");\n    this._adsLoader = new this._sdk.AdsLoader(this._adDisplayContainer);\n    this._adsLoader.addEventListener(this._sdk.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this._onAdsManagerLoaded.bind(this));\n    this._adsLoader.addEventListener(this._sdk.AdErrorEvent.Type.AD_ERROR, adEvent => this._stateMachine.aderror(adEvent));\n  }\n\n  /**\n   * Requests the ads from the ads loader.\n   * @private\n   * @returns {void}\n   */\n  _requestAds(): void {\n    if (this.config.adTagUrl || this.config.adsResponse) {\n      this.logger.debug(\"Request ads\");\n      // Request video ads\n      let adsRequest = new this._sdk.AdsRequest();\n      if (this.config.adTagUrl) {\n        adsRequest.adTagUrl = this.config.adTagUrl;\n      } else {\n        adsRequest.adsResponse = this.config.adsResponse;\n      }\n      let playerViewSize = this._getPlayerViewSize();\n      adsRequest.linearAdSlotWidth = playerViewSize.width;\n      adsRequest.linearAdSlotHeight = playerViewSize.height;\n      adsRequest.nonLinearAdSlotWidth = playerViewSize.width;\n      adsRequest.nonLinearAdSlotHeight = playerViewSize.height / 3;\n      this._adsLoader.requestAds(adsRequest);\n    } else {\n      this.logger.warn(\"Missing ad tag url: create plugin without requesting ads\");\n    }\n  }\n\n  /**\n   * Resize event handler.\n   * @private\n   * @returns {void}\n   */\n  _resizeAd() {\n    if (this._sdk && this._adsManager) {\n      let playerViewSize = this._getPlayerViewSize();\n      let isFullScreen = this._isFullScreen();\n      let viewMode = (isFullScreen ? this._sdk.ViewMode.FULLSCREEN : this._sdk.ViewMode.NORMAL);\n      this._adsManager.resize(playerViewSize.width, playerViewSize.height, viewMode);\n    }\n  }\n\n  /**\n   * Helper for checking if the document is in full screen mode.\n   * @private\n   * @returns {boolean} - Whether the document is in full screen mode.\n   */\n  _isFullScreen(): boolean {\n    return typeof document.fullscreenElement !== 'undefined' && Boolean(document.fullscreenElement) ||\n      typeof document.webkitFullscreenElement !== 'undefined' && Boolean(document.webkitFullscreenElement) ||\n      typeof document.mozFullScreenElement !== 'undefined' && Boolean(document.mozFullScreenElement) ||\n      typeof document.msFullscreenElement !== 'undefined' && Boolean(document.msFullscreenElement);\n  }\n\n  /**\n   * Gets the player view width and height.\n   * @return {Object} - The player sizes.\n   * @private\n   */\n  _getPlayerViewSize(): Object {\n    let playerView = this.player.getView();\n    let width = parseInt(getComputedStyle(playerView).width, 10);\n    let height = parseInt(getComputedStyle(playerView).height, 10);\n    return {width: width, height: height};\n  }\n\n  /**\n   * Loadedmetada event handler.\n   * @private\n   * @returns {void}\n   */\n  _onLoadedMetadata(): void {\n    this._contentPlayheadTracker.duration = this.player.duration;\n  }\n\n  /**\n   * Timeupdate event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaTimeUpdate(): void {\n    if (!this._contentPlayheadTracker.seeking) {\n      this._contentPlayheadTracker.previousTime = this._contentPlayheadTracker.currentTime;\n      this._contentPlayheadTracker.currentTime = this.player.currentTime;\n    }\n  }\n\n  /**\n   * Sets the content playhead tracker events enabled/disabled.\n   * @param {boolean} enabled - Whether do enabled the events.\n   * @private\n   * @returns {void}\n   */\n  _setContentPlayheadTrackerEventsEnabled(enabled: boolean): void {\n    if (enabled) {\n      this.eventManager.listen(this.player, this.player.Event.LOADED_METADATA, this._onLoadedMetadata.bind(this));\n      this.eventManager.listen(this.player, this.player.Event.TIME_UPDATE, this._onMediaTimeUpdate.bind(this));\n      this.eventManager.listen(this.player, this.player.Event.SEEKING, this._onMediaSeeking.bind(this));\n      this.eventManager.listen(this.player, this.player.Event.SEEKED, this._onMediaSeeked.bind(this));\n    } else {\n      this.eventManager.unlisten(this.player, this.player.Event.LOADED_METADATA);\n      this.eventManager.unlisten(this.player, this.player.Event.TIME_UPDATE);\n      this.eventManager.unlisten(this.player, this.player.Event.SEEKING);\n      this.eventManager.unlisten(this.player, this.player.Event.SEEKED);\n    }\n  }\n\n  /**\n   * Seeking event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaSeeking(): void {\n    this._contentPlayheadTracker.seeking = true;\n  }\n\n  /**\n   * Seeked event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaSeeked(): void {\n    this._contentPlayheadTracker.seeking = false;\n  }\n\n  /**\n   * Removes or adds the listener for ended event.\n   * @param {boolean} enable - Whether to enable the event listener or not.\n   * @private\n   * @return {void}\n   */\n  _setVideoEndedCallbackEnabled(enable: boolean): void {\n    if (enable) {\n      this.eventManager.listen(this.player, this.player.Event.ENDED, this._onMediaEnded.bind(this));\n    } else {\n      this.eventManager.unlisten(this.player, this.player.Event.ENDED);\n    }\n  }\n\n  /**\n   * Maybe save the video current time before ads starts (on ios this is necessary).\n   * @private\n   * @return {void}\n   */\n  _maybeSaveVideoCurrentTime(): void {\n    if (this._adsManager.isCustomPlaybackUsed() && this.player.currentTime && this.player.currentTime > 0) {\n      this.logger.debug(\"Custom playback used: save current time before ads\", this.player.currentTime);\n      this._videoLastCurrentTime = this.player.currentTime;\n    }\n  }\n\n  /**\n   * Maybe sets the video current time after ads finished (on ios this is necessary).\n   * @private\n   * @return {void}\n   */\n  _maybeSetVideoCurrentTime(): void {\n    if (this._videoLastCurrentTime) {\n      this.logger.debug(\"Custom playback used: set current time after ads\", this._videoLastCurrentTime);\n      this.player.currentTime = this._videoLastCurrentTime;\n      this._videoLastCurrentTime = null;\n    }\n  }\n\n  /**\n   * Ended event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaEnded(): void {\n    this.logger.debug(\"Media ended\");\n    this._adsLoader.contentComplete();\n    this._contentComplete = true;\n    if (!this._currentAd.isLinear()) {\n      this.destroy();\n    }\n  }\n\n  /**\n   * Shows the ads container.\n   * @private\n   * @returns {void}\n   */\n  _showAdsContainer(): void {\n    if (this._adsContainerDiv) {\n      this._adsContainerDiv.style.display = \"\";\n    }\n  }\n\n  /**\n   * Hides the ads container.\n   * @private\n   * @returns {void}\n   */\n  _hideAdsContainer(): void {\n    if (this._adsContainerDiv) {\n      this._adsContainerDiv.style.display = \"none\";\n    }\n  }\n\n  /**\n   * The ads manager loaded handler.\n   * @param {any} adsManagerLoadedEvent - The event data.\n   * @private\n   * @returns {void}\n   */\n  _onAdsManagerLoaded(adsManagerLoadedEvent: any): void {\n    this.logger.debug('Ads manager loaded');\n    let adsRenderingSettings = new this._sdk.AdsRenderingSettings();\n    Object.keys(this.config.adsRenderingSettings).forEach((setting) => {\n      if (adsRenderingSettings[setting] != null) {\n        adsRenderingSettings[setting] = this.config.adsRenderingSettings[setting];\n      }\n    });\n    this._adsManager = adsManagerLoadedEvent.getAdsManager(this._contentPlayheadTracker, adsRenderingSettings);\n    this._isAdsManagerLoaded = true;\n    this._attachAdsManagerListeners();\n    this._syncPlayerVolume();\n    if (this._hasUserAction) {\n      this.logger.debug(\"User action occurred before ads manager loaded\");\n      this._startAdsManager();\n    }\n  }\n\n  /**\n   * Attach the ads manager listeners.\n   * @private\n   * @returns {void}\n   */\n  _attachAdsManagerListeners(): void {\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.CONTENT_PAUSE_REQUESTED, adEvent => this._stateMachine.adbreakstart(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.LOADED, adEvent => this._stateMachine.adloaded(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.STARTED, adEvent => this._stateMachine.adstarted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.PAUSED, adEvent => this._stateMachine.adpaused(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.RESUMED, adEvent => this._stateMachine.adresumed(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.FIRST_QUARTILE, adEvent => this._stateMachine.adfirstquartile(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.MIDPOINT, adEvent => this._stateMachine.admidpoint(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.THIRD_QUARTILE, adEvent => this._stateMachine.adthirdquartile(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.CLICK, adEvent => this._stateMachine.adclicked(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.SKIPPED, adEvent => this._stateMachine.adskipped(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.COMPLETE, adEvent => this._stateMachine.adcompleted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.CONTENT_RESUME_REQUESTED, adEvent => this._stateMachine.adbreakend(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.ALL_ADS_COMPLETED, adEvent => this._stateMachine.alladscompleted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.USER_CLOSE, adEvent => this._stateMachine.userclosedad(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.VOLUME_CHANGED, adEvent => this._stateMachine.advolumechanged(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.VOLUME_MUTED, adEvent => this._stateMachine.admuted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.LOG, adEvent => this._stateMachine.aderror(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdErrorEvent.Type.AD_ERROR, adEvent => this._stateMachine.aderror(adEvent));\n  }\n\n  /**\n   * Syncs the player volume.\n   * @private\n   * @returns {void}\n   */\n  _syncPlayerVolume(): void {\n    if (this._adsManager) {\n      if (this.player.muted) {\n        this._adsManager.setVolume(0);\n      } else {\n        this._adsManager.setVolume(this.player.volume);\n      }\n    }\n  }\n\n  /**\n   * Starts ad interval timer.\n   * @private\n   * @returns {void}\n   */\n  _startAdInterval(): void {\n    this._stopAdInterval();\n    this._intervalTimer = setInterval(() => {\n      if (this._stateMachine.is(State.PLAYING)) {\n        let remainingTime = this._adsManager.getRemainingTime();\n        let duration = this._adsManager.getCurrentAd().getDuration();\n        let currentTime = duration - remainingTime;\n        if (Utils.Number.isNumber(duration) && Utils.Number.isNumber(currentTime)) {\n          this.dispatchEvent(this.player.Event.AD_PROGRESS, {\n            adProgress: {\n              currentTime: currentTime,\n              duration: duration\n            }\n          });\n        }\n      }\n    }, 300);\n  }\n\n  /**\n   * Stops ads interval timer.\n   * @private\n   * @returns {void}\n   */\n  _stopAdInterval(): void {\n    if (this._intervalTimer) {\n      clearInterval(this._intervalTimer);\n      this._intervalTimer = null;\n    }\n  }\n\n  /**\n   * Resolves the next promise to let the next handler in the middleware chain start.\n   * @private\n   * @returns {void}\n   */\n  _resolveNextPromise(): void {\n    if (this._nextPromise) {\n      this._nextPromise.resolve();\n      this._nextPromise = null;\n    }\n  }\n\n  /**\n   * Displays companion ads using the Ad API.\n   * @private\n   * @returns {void}\n   */\n  _maybeDisplayCompanionAds(): void {\n    if (this.config.companions && !window.googletag) {\n      let companionsIds = Object.keys(this.config.companions);\n      for (let i = 0; i < companionsIds.length; i++) {\n        let id = companionsIds[i];\n        let width = this.config.companions[id].width;\n        let height = this.config.companions[id].height;\n        let sizeCriteria = this.config.companions[id].sizeCriteria || '';\n        let companionAds = [];\n        try {\n          let selectionCriteria = new this._sdk.CompanionAdSelectionSettings();\n          selectionCriteria.resourceType = this._sdk.CompanionAdSelectionSettings.ResourceType.ALL;\n          selectionCriteria.creativeType = this._sdk.CompanionAdSelectionSettings.CreativeType.ALL;\n          switch (sizeCriteria.toLowerCase()) {\n            case 'selectnearmatch':\n              selectionCriteria.sizeCriteria = this._sdk.CompanionAdSelectionSettings.SizeCriteria.SELECT_NEAR_MATCH;\n              break;\n            case 'ignore':\n              selectionCriteria.sizeCriteria = this._sdk.CompanionAdSelectionSettings.SizeCriteria.IGNORE;\n              break;\n            case 'selectexactmatch':\n            default:\n              selectionCriteria.sizeCriteria = this._sdk.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH;\n              break;\n          }\n          companionAds = this._currentAd.getCompanionAds(width, height, selectionCriteria);\n          if (companionAds.length > 0) {\n            let companionAd = companionAds[0];\n            let content = companionAd.getContent();\n            let el = Utils.Dom.getElementById(id);\n            if (el) {\n              el.innerHTML = content;\n            }\n          }\n        } catch (e) {\n          this.logger.error(e);\n        }\n      }\n    }\n  }\n}\n\nregisterPlugin(pluginName, Ima);\n\n\n\n// WEBPACK FOOTER //\n// ./ima.js","// @flow\nimport {BaseMiddleware} from 'playkit-js'\nimport State from './state'\n\n/**\n * Middleware implementation for ima plugin.\n * @classdesc\n */\nexport default class ImaMiddleware extends BaseMiddleware {\n  /**\n   * The id of the ima middleware.\n   * @type {string}\n   * @public\n   */\n  id: string = \"ImaMiddleware\";\n  /**\n   * The plugin context.\n   * @member\n   * @private\n   */\n  _context: any;\n  /**\n   * Whether the player has been loaded.\n   * @member\n   * @private\n   */\n  _isPlayerLoaded: boolean;\n\n  /**\n   * @constructor\n   * @param {any} context - The plugin context.\n   */\n  constructor(context: any) {\n    super();\n    this._context = context;\n  }\n\n  /**\n   * Play middleware handler.\n   * @param {Function} next - The next play handler in the middleware chain.\n   * @returns {void}\n   */\n  play(next: Function): void {\n    if (!this._isPlayerLoaded) {\n      this._context.player.load();\n      this._isPlayerLoaded = true;\n      this._context.logger.debug(\"Player loaded\");\n    }\n    this._context.loadPromise.then(() => {\n      let sm = this._context.getStateMachine();\n      switch (sm.state) {\n        case State.LOADED:\n          this._context.initialUserAction()\n            .then(() => {\n              this.callNext(next);\n            });\n          break;\n        case State.PAUSED:\n          this._context.resumeAd()\n            .then(() => {\n              this.callNext(next);\n            });\n          break;\n        default:\n          this.callNext(next);\n          break;\n      }\n    }).catch((e) => {\n      this._context.destroy();\n      this._context.logger.error(e);\n      this.callNext(next);\n    });\n  }\n\n  /**\n   * Pause middleware handler.\n   * @param {Function} next - The next pause handler in the middleware chain.\n   * @returns {void}\n   */\n  pause(next: Function): void {\n    let sm = this._context.getStateMachine();\n    switch (sm.state) {\n      case State.PLAYING:\n        this._context.pauseAd();\n        break;\n      default:\n        this.callNext(next);\n        break;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ima-middleware.js","// @flow\nimport StateMachine from 'javascript-state-machine'\nimport StateMachineHistory from 'javascript-state-machine/lib/history'\nimport State from './state'\n\n/**\n * Finite state machine for ima plugin.\n * @classdesc\n */\nexport default class ImaStateMachine {\n  /**\n   * @constructor\n   * @param {any} context - The plugin context.\n   */\n  constructor(context: any) {\n    return new StateMachine({\n      init: State.LOADING,\n      transitions: [\n        {\n          name: 'loaded',\n          from: [State.LOADING, State.IDLE, State.DONE],\n          to: State.LOADED\n        },\n        {\n          name: context.player.Event.AD_STARTED,\n          from: [State.LOADED, State.IDLE, State.PAUSED],\n          to: function (adEvent: any): string {\n            let ad = adEvent.getAd();\n            if (!ad.isLinear()) {\n              return State.IDLE;\n            }\n            return State.PLAYING;\n          }\n        },\n        {\n          name: context.player.Event.AD_RESUMED,\n          from: State.PAUSED,\n          to: State.PLAYING\n        },\n        {\n          name: context.player.Event.AD_PAUSED,\n          from: State.PLAYING,\n          to: State.PAUSED\n        },\n        {\n          name: context.player.Event.AD_SKIPPED,\n          from: [State.PLAYING, State.PAUSED],\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.AD_COMPLETED,\n          from: State.PLAYING,\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.ALL_ADS_COMPLETED,\n          from: State.IDLE,\n          to: State.DONE\n        },\n        {\n          name: context.player.Event.AD_BREAK_END,\n          from: [State.IDLE, State.LOADED],\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.AD_ERROR,\n          from: [State.LOADED, State.PLAYING, State.PAUSED, State.LOADING],\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.AD_LOADED,\n          from: [State.IDLE, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_FIRST_QUARTILE,\n          from: State.PLAYING\n        },\n        {\n          name: context.player.Event.AD_BREAK_START,\n          from: [State.IDLE, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_MIDPOINT,\n          from: State.PLAYING\n        },\n        {\n          name: context.player.Event.AD_THIRD_QUARTILE,\n          from: State.PLAYING\n        },\n        {\n          name: context.player.Event.USER_CLOSED_AD,\n          from: [State.IDLE, State.PLAYING, State.PAUSED]\n        },\n        {\n          name: context.player.Event.AD_VOLUME_CHANGED,\n          from: [State.PLAYING, State.PAUSED, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_MUTED,\n          from: [State.PLAYING, State.PAUSED, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_CLICKED,\n          from: [State.PLAYING, State.PAUSED, State.IDLE]\n        }\n      ],\n      methods: {\n        onAdloaded: onAdLoaded.bind(context),\n        onAdstarted: onAdStarted.bind(context),\n        onAdpaused: onAdPaused.bind(context),\n        onAdresumed: onAdEvent.bind(context),\n        onAdclicked: onAdClicked.bind(context),\n        onAdskipped: onAdSkipped.bind(context),\n        onAdcompleted: onAdCompleted.bind(context),\n        onAlladscompleted: onAllAdsCompleted.bind(context),\n        onAdbreakstart: onAdBreakStart.bind(context),\n        onAdbreakend: onAdBreakEnd.bind(context),\n        onAdfirstquartile: onAdEvent.bind(context),\n        onAdmidpoint: onAdEvent.bind(context),\n        onAdthirdquartile: onAdEvent.bind(context),\n        onAderror: onAdError.bind(context),\n        onUserclosedad: onAdEvent.bind(context),\n        onAdvolumechanged: onAdEvent.bind(context),\n        onAdmuted: onAdEvent.bind(context),\n        onEnterState: onEnterState.bind(context),\n      },\n      plugins: [\n        new StateMachineHistory()\n      ]\n    });\n  }\n}\n\n/**\n * LOADED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdLoaded(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this.dispatchEvent(options.transition, normalizeAdEvent(adEvent));\n}\n\n/**\n * STARTED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdStarted(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this._currentAd = adEvent.getAd();\n  this._resizeAd();\n  this._maybeDisplayCompanionAds();\n  if (!this._currentAd.isLinear()) {\n    this._setContentPlayheadTrackerEventsEnabled(true);\n    this._setVideoEndedCallbackEnabled(true);\n    if (this._nextPromise) {\n      this._resolveNextPromise();\n    } else {\n      this.player.play();\n    }\n  } else {\n    this._setContentPlayheadTrackerEventsEnabled(false);\n    this._startAdInterval();\n  }\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * CLICKED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdClicked(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  if (this._currentAd.isLinear()) {\n    if (this._stateMachine.is(State.PLAYING)) {\n      this.pauseAd();\n    } else if (this._stateMachine.is(State.PAUSED)) {\n      this.resumeAd();\n    }\n  } else {\n    if (!this.player.paused) {\n      this.player.pause();\n    }\n  }\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * PAUSED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdPaused(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * COMPLETE event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdCompleted(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  if (this._currentAd.isLinear()) {\n    this._stopAdInterval();\n  }\n  this._currentAd = null;\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * ALL_ADS_COMPLETED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAllAdsCompleted(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  onAdBreakEnd.call(this, options, adEvent);\n  if (this._adsManager.isCustomPlaybackUsed() && this._contentComplete) {\n    this.player.getVideoElement().src = this._contentSrc;\n  }\n  this.destroy();\n}\n\n/**\n * CONTENT_PAUSED_REQUESTED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdBreakStart(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this._showAdsContainer();\n  this.player.pause();\n  this._setVideoEndedCallbackEnabled(false);\n  this._maybeSaveVideoCurrentTime();\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * CONTENT_RESUMED_REQUESTED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdBreakEnd(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this._setVideoEndedCallbackEnabled(true);\n  this._setContentPlayheadTrackerEventsEnabled(true);\n  if (!this._contentComplete) {\n    this._hideAdsContainer();\n    this._maybeSetVideoCurrentTime();\n    if (this._nextPromise) {\n      this._resolveNextPromise();\n    } else {\n      this.player.play();\n    }\n  }\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * ERROR event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdError(options: Object, adEvent: any): void {\n  if (adEvent.type === \"adError\") {\n    this.logger.debug(adEvent.type.toUpperCase());\n    let adError = adEvent.getError();\n    if (this.loadPromise) {\n      this.loadPromise.reject(adError);\n    }\n    if (this._nextPromise) {\n      this._nextPromise.reject(adError);\n    }\n    this.dispatchEvent(options.transition, normalizeAdError(adError, true));\n  } else {\n    this.logger.debug(adEvent.type.toUpperCase());\n    let adData = adEvent.getAdData();\n    let adError = adData.adError;\n    if (adData.adError) {\n      this.logger.error('Non-fatal error occurred: ' + adError.getMessage());\n      this.dispatchEvent(this.player.Event.AD_ERROR, normalizeAdError(adError, false));\n    }\n  }\n}\n\n/**\n * SKIPPED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdSkipped(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this._stopAdInterval();\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * General event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdEvent(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * Enter state handler.\n * @param {Object} options - fsm event data.\n * @returns {void}\n */\nfunction onEnterState(options: Object): void {\n  if (options.from !== options.to) {\n    this.logger.debug(\"Change state: \" + options.from + \" => \" + options.to);\n  }\n}\n\n/**\n * Normalize the ima ad error object.\n * @param {any} adError - The ima ad error object.\n * @param {boolean} fatal - Whether the error is fatal.\n * @returns {Object} - The normalized ad error object.\n */\nfunction normalizeAdError(adError: any, fatal: boolean): Object {\n  return {\n    fatal: fatal,\n    error: {\n      code: adError.getErrorCode(),\n      message: adError.getMessage()\n    }\n  };\n}\n\n/**\n * Normalize the ima ad event object.\n * @param {any} adEvent - The ima ad error object.\n * @returns {Object} - The normalized ad event object.\n */\nfunction normalizeAdEvent(adEvent: any): Object {\n  return {\n    ad: adEvent.getAd(),\n    extraAdData: adEvent.getAdData()\n  };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./ima-state-machine.js","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"StateMachine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateMachine\"] = factory();\n\telse\n\t\troot[\"StateMachine\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function(target, sources) {\n  var n, source, key;\n  for(n = 1 ; n < arguments.length ; n++) {\n    source = arguments[n];\n    for(key in source) {\n      if (source.hasOwnProperty(key))\n        target[key] = source[key];\n    }\n  }\n  return target;\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar mixin = __webpack_require__(0);\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = {\n\n  build: function(target, config) {\n    var n, max, plugin, plugins = config.plugins;\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n];\n      if (plugin.methods)\n        mixin(target, plugin.methods);\n      if (plugin.properties)\n        Object.defineProperties(target, plugin.properties);\n    }\n  },\n\n  hook: function(fsm, name, additional) {\n    var n, max, method, plugin,\n        plugins = fsm.config.plugins,\n        args    = [fsm.context];\n\n    if (additional)\n      args = args.concat(additional)\n\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n]\n      method = plugins[n][name]\n      if (method)\n        method.apply(plugin, args);\n    }\n  }\n\n}\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nfunction camelize(label) {\n\n  if (label.length === 0)\n    return label;\n\n  var n, result, word, words = label.split(/[_-]/);\n\n  // single word with first character already lowercase, return untouched\n  if ((words.length === 1) && (words[0][0].toLowerCase() === words[0][0]))\n    return label;\n\n  result = words[0].toLowerCase();\n  for(n = 1 ; n < words.length ; n++) {\n    result = result + words[n].charAt(0).toUpperCase() + words[n].substring(1).toLowerCase();\n  }\n\n  return result;\n}\n\n//-------------------------------------------------------------------------------------------------\n\ncamelize.prepended = function(prepend, label) {\n  label = camelize(label);\n  return prepend + label[0].toUpperCase() + label.substring(1);\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = camelize;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar mixin    = __webpack_require__(0),\n    camelize = __webpack_require__(2);\n\n//-------------------------------------------------------------------------------------------------\n\nfunction Config(options, StateMachine) {\n\n  options = options || {};\n\n  this.options     = options; // preserving original options can be useful (e.g visualize plugin)\n  this.defaults    = StateMachine.defaults;\n  this.states      = [];\n  this.transitions = [];\n  this.map         = {};\n  this.lifecycle   = this.configureLifecycle();\n  this.init        = this.configureInitTransition(options.init);\n  this.data        = this.configureData(options.data);\n  this.methods     = this.configureMethods(options.methods);\n\n  this.map[this.defaults.wildcard] = {};\n\n  this.configureTransitions(options.transitions || []);\n\n  this.plugins = this.configurePlugins(options.plugins, StateMachine.plugin);\n\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmixin(Config.prototype, {\n\n  addState: function(name) {\n    if (!this.map[name]) {\n      this.states.push(name);\n      this.addStateLifecycleNames(name);\n      this.map[name] = {};\n    }\n  },\n\n  addStateLifecycleNames: function(name) {\n    this.lifecycle.onEnter[name] = camelize.prepended('onEnter', name);\n    this.lifecycle.onLeave[name] = camelize.prepended('onLeave', name);\n    this.lifecycle.on[name]      = camelize.prepended('on',      name);\n  },\n\n  addTransition: function(name) {\n    if (this.transitions.indexOf(name) < 0) {\n      this.transitions.push(name);\n      this.addTransitionLifecycleNames(name);\n    }\n  },\n\n  addTransitionLifecycleNames: function(name) {\n    this.lifecycle.onBefore[name] = camelize.prepended('onBefore', name);\n    this.lifecycle.onAfter[name]  = camelize.prepended('onAfter',  name);\n    this.lifecycle.on[name]       = camelize.prepended('on',       name);\n  },\n\n  mapTransition: function(transition) {\n    var name = transition.name,\n        from = transition.from,\n        to   = transition.to;\n    this.addState(from);\n    if (typeof to !== 'function')\n      this.addState(to);\n    this.addTransition(name);\n    this.map[from][name] = transition;\n    return transition;\n  },\n\n  configureLifecycle: function() {\n    return {\n      onBefore: { transition: 'onBeforeTransition' },\n      onAfter:  { transition: 'onAfterTransition'  },\n      onEnter:  { state:      'onEnterState'       },\n      onLeave:  { state:      'onLeaveState'       },\n      on:       { transition: 'onTransition'       }\n    };\n  },\n\n  configureInitTransition: function(init) {\n    if (typeof init === 'string') {\n      return this.mapTransition(mixin({}, this.defaults.init, { to: init, active: true }));\n    }\n    else if (typeof init === 'object') {\n      return this.mapTransition(mixin({}, this.defaults.init, init, { active: true }));\n    }\n    else {\n      this.addState(this.defaults.init.from);\n      return this.defaults.init;\n    }\n  },\n\n  configureData: function(data) {\n    if (typeof data === 'function')\n      return data;\n    else if (typeof data === 'object')\n      return function() { return data; }\n    else\n      return function() { return {};  }\n  },\n\n  configureMethods: function(methods) {\n    return methods || {};\n  },\n\n  configurePlugins: function(plugins, builtin) {\n    plugins = plugins || [];\n    var n, max, plugin;\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n];\n      if (typeof plugin === 'function')\n        plugins[n] = plugin = plugin()\n      if (plugin.configure)\n        plugin.configure(this);\n    }\n    return plugins\n  },\n\n  configureTransitions: function(transitions) {\n    var i, n, transition, from, to, wildcard = this.defaults.wildcard;\n    for(n = 0 ; n < transitions.length ; n++) {\n      transition = transitions[n];\n      from  = Array.isArray(transition.from) ? transition.from : [transition.from || wildcard]\n      to    = transition.to || wildcard;\n      for(i = 0 ; i < from.length ; i++) {\n        this.mapTransition({ name: transition.name, from: from[i], to: to });\n      }\n    }\n  },\n\n  transitionFor: function(state, transition) {\n    var wildcard = this.defaults.wildcard;\n    return this.map[state][transition] ||\n           this.map[wildcard][transition];\n  },\n\n  transitionsFor: function(state) {\n    var wildcard = this.defaults.wildcard;\n    return Object.keys(this.map[state]).concat(Object.keys(this.map[wildcard]));\n  },\n\n  allStates: function() {\n    return this.states;\n  },\n\n  allTransitions: function() {\n    return this.transitions;\n  }\n\n});\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = Config;\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar mixin      = __webpack_require__(0),\n    Exception  = __webpack_require__(6),\n    plugin     = __webpack_require__(1),\n    UNOBSERVED = [ null, [] ];\n\n//-------------------------------------------------------------------------------------------------\n\nfunction JSM(context, config) {\n  this.context   = context;\n  this.config    = config;\n  this.state     = config.init.from;\n  this.observers = [context];\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmixin(JSM.prototype, {\n\n  init: function(args) {\n    mixin(this.context, this.config.data.apply(this.context, args));\n    plugin.hook(this, 'init');\n    if (this.config.init.active)\n      return this.fire(this.config.init.name, []);\n  },\n\n  is: function(state) {\n    return Array.isArray(state) ? (state.indexOf(this.state) >= 0) : (this.state === state);\n  },\n\n  isPending: function() {\n    return this.pending;\n  },\n\n  can: function(transition) {\n    return !this.isPending() && !!this.seek(transition);\n  },\n\n  cannot: function(transition) {\n    return !this.can(transition);\n  },\n\n  allStates: function() {\n    return this.config.allStates();\n  },\n\n  allTransitions: function() {\n    return this.config.allTransitions();\n  },\n\n  transitions: function() {\n    return this.config.transitionsFor(this.state);\n  },\n\n  seek: function(transition, args) {\n    var wildcard = this.config.defaults.wildcard,\n        entry    = this.config.transitionFor(this.state, transition),\n        to       = entry && entry.to;\n    if (typeof to === 'function')\n      return to.apply(this.context, args);\n    else if (to === wildcard)\n      return this.state\n    else\n      return to\n  },\n\n  fire: function(transition, args) {\n    return this.transit(transition, this.state, this.seek(transition, args), args);\n  },\n\n  transit: function(transition, from, to, args) {\n\n    var lifecycle = this.config.lifecycle,\n        changed   = this.config.options.observeUnchangedState || (from !== to);\n\n    if (!to)\n      return this.context.onInvalidTransition(transition, from, to);\n\n    if (this.isPending())\n      return this.context.onPendingTransition(transition, from, to);\n\n    this.config.addState(to);  // might need to add this state if it's unknown (e.g. conditional transition or goto)\n\n    this.beginTransit();\n\n    args.unshift({             // this context will be passed to each lifecycle event observer\n      transition: transition,\n      from:       from,\n      to:         to,\n      fsm:        this.context\n    });\n\n    return this.observeEvents([\n                this.observersForEvent(lifecycle.onBefore.transition),\n                this.observersForEvent(lifecycle.onBefore[transition]),\n      changed ? this.observersForEvent(lifecycle.onLeave.state) : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onLeave[from]) : UNOBSERVED,\n                this.observersForEvent(lifecycle.on.transition),\n      changed ? [ 'doTransit', [ this ] ]                       : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onEnter.state) : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onEnter[to])   : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.on[to])        : UNOBSERVED,\n                this.observersForEvent(lifecycle.onAfter.transition),\n                this.observersForEvent(lifecycle.onAfter[transition]),\n                this.observersForEvent(lifecycle.on[transition])\n    ], args);\n  },\n\n  beginTransit: function()          { this.pending = true;                 },\n  endTransit:   function(result)    { this.pending = false; return result; },\n  failTransit:  function(result)    { this.pending = false; throw result;  },\n  doTransit:    function(lifecycle) { this.state = lifecycle.to;           },\n\n  observe: function(args) {\n    if (args.length === 2) {\n      var observer = {};\n      observer[args[0]] = args[1];\n      this.observers.push(observer);\n    }\n    else {\n      this.observers.push(args[0]);\n    }\n  },\n\n  observersForEvent: function(event) { // TODO: this could be cached\n    var n = 0, max = this.observers.length, observer, result = [];\n    for( ; n < max ; n++) {\n      observer = this.observers[n];\n      if (observer[event])\n        result.push(observer);\n    }\n    return [ event, result, true ]\n  },\n\n  observeEvents: function(events, args, previousEvent, previousResult) {\n    if (events.length === 0) {\n      return this.endTransit(previousResult === undefined ? true : previousResult);\n    }\n\n    var event     = events[0][0],\n        observers = events[0][1],\n        pluggable = events[0][2];\n\n    args[0].event = event;\n    if (event && pluggable && event !== previousEvent)\n      plugin.hook(this, 'lifecycle', args);\n\n    if (observers.length === 0) {\n      events.shift();\n      return this.observeEvents(events, args, event, previousResult);\n    }\n    else {\n      var observer = observers.shift(),\n          result = observer[event].apply(observer, args);\n      if (result && typeof result.then === 'function') {\n        return result.then(this.observeEvents.bind(this, events, args, event))\n                     .catch(this.failTransit.bind(this))\n      }\n      else if (result === false) {\n        return this.endTransit(false);\n      }\n      else {\n        return this.observeEvents(events, args, event, result);\n      }\n    }\n  },\n\n  onInvalidTransition: function(transition, from, to) {\n    throw new Exception(\"transition is invalid in current state\", transition, from, to, this.state);\n  },\n\n  onPendingTransition: function(transition, from, to) {\n    throw new Exception(\"transition is invalid while previous transition is still in progress\", transition, from, to, this.state);\n  }\n\n});\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = JSM;\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-----------------------------------------------------------------------------------------------\n\nvar mixin    = __webpack_require__(0),\n    camelize = __webpack_require__(2),\n    plugin   = __webpack_require__(1),\n    Config   = __webpack_require__(3),\n    JSM      = __webpack_require__(4);\n\n//-----------------------------------------------------------------------------------------------\n\nvar PublicMethods = {\n  is:                  function(state)       { return this._fsm.is(state)                                     },\n  can:                 function(transition)  { return this._fsm.can(transition)                               },\n  cannot:              function(transition)  { return this._fsm.cannot(transition)                            },\n  observe:             function()            { return this._fsm.observe(arguments)                            },\n  transitions:         function()            { return this._fsm.transitions()                                 },\n  allTransitions:      function()            { return this._fsm.allTransitions()                              },\n  allStates:           function()            { return this._fsm.allStates()                                   },\n  onInvalidTransition: function(t, from, to) { return this._fsm.onInvalidTransition(t, from, to)              },\n  onPendingTransition: function(t, from, to) { return this._fsm.onPendingTransition(t, from, to)              },\n}\n\nvar PublicProperties = {\n  state: {\n    configurable: false,\n    enumerable:   true,\n    get: function() {\n      return this._fsm.state;\n    },\n    set: function(state) {\n      throw Error('use transitions to change state')\n    }\n  }\n}\n\n//-----------------------------------------------------------------------------------------------\n\nfunction StateMachine(options) {\n  return apply(this || {}, options);\n}\n\nfunction factory() {\n  var cstor, options;\n  if (typeof arguments[0] === 'function') {\n    cstor   = arguments[0];\n    options = arguments[1] || {};\n  }\n  else {\n    cstor   = function() { this._fsm.apply(this, arguments) };\n    options = arguments[0] || {};\n  }\n  var config = new Config(options, StateMachine);\n  build(cstor.prototype, config);\n  cstor.prototype._fsm.config = config; // convenience access to shared config without needing an instance\n  return cstor;\n}\n\n//-------------------------------------------------------------------------------------------------\n\nfunction apply(instance, options) {\n  var config = new Config(options, StateMachine);\n  build(instance, config);\n  instance._fsm();\n  return instance;\n}\n\nfunction build(target, config) {\n  if ((typeof target !== 'object') || Array.isArray(target))\n    throw Error('StateMachine can only be applied to objects');\n  plugin.build(target, config);\n  Object.defineProperties(target, PublicProperties);\n  mixin(target, PublicMethods);\n  mixin(target, config.methods);\n  config.allTransitions().forEach(function(transition) {\n    target[camelize(transition)] = function() {\n      return this._fsm.fire(transition, [].slice.call(arguments))\n    }\n  });\n  target._fsm = function() {\n    this._fsm = new JSM(this, config);\n    this._fsm.init(arguments);\n  }\n}\n\n//-----------------------------------------------------------------------------------------------\n\nStateMachine.version  = '3.0.1';\nStateMachine.factory  = factory;\nStateMachine.apply    = apply;\nStateMachine.defaults = {\n  wildcard: '*',\n  init: {\n    name: 'init',\n    from: 'none'\n  }\n}\n\n//===============================================================================================\n\nmodule.exports = StateMachine;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function(message, transition, from, to, current) {\n  this.message    = message;\n  this.transition = transition;\n  this.from       = from;\n  this.to         = to;\n  this.current    = current;\n}\n\n\n/***/ })\n/******/ ]);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/javascript-state-machine/lib/state-machine.js\n// module id = 5\n// module chunks = 0","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"StateMachineHistory\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateMachineHistory\"] = factory();\n\telse\n\t\troot[\"StateMachineHistory\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nfunction camelize(label) {\n\n  if (label.length === 0)\n    return label;\n\n  var n, result, word, words = label.split(/[_-]/);\n\n  // single word with first character already lowercase, return untouched\n  if ((words.length === 1) && (words[0][0].toLowerCase() === words[0][0]))\n    return label;\n\n  result = words[0].toLowerCase();\n  for(n = 1 ; n < words.length ; n++) {\n    result = result + words[n].charAt(0).toUpperCase() + words[n].substring(1).toLowerCase();\n  }\n\n  return result;\n}\n\n//-------------------------------------------------------------------------------------------------\n\ncamelize.prepended = function(prepend, label) {\n  label = camelize(label);\n  return prepend + label[0].toUpperCase() + label.substring(1);\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = camelize;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar camelize = __webpack_require__(0);\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = function(options) { options = options || {};\n\n  var past       = camelize(options.name || options.past   || 'history'),\n      future     = camelize(                options.future || 'future'),\n      clear      = camelize.prepended('clear', past),\n      back       = camelize.prepended(past,   'back'),\n      forward    = camelize.prepended(past,   'forward'),\n      canBack    = camelize.prepended('can',   back),\n      canForward = camelize.prepended('can',   forward),\n      max        = options.max;\n\n  var plugin = {\n\n    configure: function(config) {\n      config.addTransitionLifecycleNames(back);\n      config.addTransitionLifecycleNames(forward);\n    },\n\n    init: function(instance) {\n      instance[past]   = [];\n      instance[future] = [];\n    },\n\n    lifecycle: function(instance, lifecycle) {\n      if (lifecycle.event === 'onEnterState') {\n        instance[past].push(lifecycle.to);\n        if (max && instance[past].length > max)\n          instance[past].shift();\n        if (lifecycle.transition !== back && lifecycle.transition !== forward)\n          instance[future].length = 0;\n      }\n    },\n\n    methods:    {},\n    properties: {}\n\n  }\n\n  plugin.methods[clear] = function() {\n    this[past].length = 0\n    this[future].length = 0\n  }\n\n  plugin.properties[canBack] = {\n    get: function() {\n      return this[past].length > 1\n    }\n  }\n\n  plugin.properties[canForward] = {\n    get: function() {\n      return this[future].length > 0\n    }\n  }\n\n  plugin.methods[back] = function() {\n    if (!this[canBack])\n      throw Error('no history');\n    var from = this[past].pop(),\n        to   = this[past].pop();\n    this[future].push(from);\n    this._fsm.transit(back, from, to, []);\n  }\n\n  plugin.methods[forward] = function() {\n    if (!this[canForward])\n      throw Error('no history');\n    var from = this.state,\n        to = this[future].pop();\n    this._fsm.transit(forward, from, to, []);\n  }\n\n  return plugin;\n\n}\n\n\n/***/ })\n/******/ ]);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/javascript-state-machine/lib/history.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}