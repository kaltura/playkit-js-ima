{"version":3,"sources":["webpack:///ima/webpack/universalModuleDefinition","webpack:///ima/webpack/bootstrap dab993aa6527a9521640","webpack:///ima/./state.js","webpack:///ima/external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":\"Playkit\"}","webpack:///ima/./ima.js","webpack:///ima/./ima-middleware.js","webpack:///ima/./ima-state-machine.js","webpack:///ima/../node_modules/javascript-state-machine/lib/state-machine.js","webpack:///ima/../node_modules/javascript-state-machine/lib/history.js"],"names":["State","LOADING","LOADED","PLAYING","PAUSED","IDLE","DONE","pluginName","ADS_CONTAINER_ID","Ima","name","player","config","String","capitlize","_stateMachine","_intervalTimer","_videoLastCurrentTime","_adsManager","_contentComplete","_contentPlayheadTracker","currentTime","previousTime","seeking","duration","_addBindings","_init","adTagUrl","loadPromise","Object","defer","destroy","_initAdsLoader","_requestAds","then","_startAdsManager","bind","logger","debug","getAdSkippableState","skip","skipSupport","stop","_nextPromise","resume","pause","update","is","eventManager","_stopAdInterval","_hideAdsContainer","_adsLoader","contentComplete","_adDisplayContainer","initialize","adError","error","playerViewSize","_getPlayerViewSize","isCustomPlaybackUsed","listen","Event","LOADED_METADATA","unlisten","init","width","height","_sdk","ViewMode","NORMAL","start","load","window","_resizeAd","getVideoElement","_onLoadedMetadata","TIME_UPDATE","_onMediaTimeUpdate","SEEKING","_onMediaSeeking","SEEKED","_onMediaSeeked","VOLUME_CHANGE","_syncPlayerVolume","google","ima","Promise","resolve","Dom","loadScriptAsync","IMA_SDK_DEBUG_LIB_URL","IMA_SDK_LIB_URL","VERSION","_initImaSettings","_initAdsContainer","catch","e","reject","settings","setPlayerType","setPlayerVersion","setVpaidAllowed","setVpaidMode","ImaSdkSettings","VpaidMode","ENABLED","setDisableCustomPlaybackForIOS10Plus","adsContainerDiv","getElementById","playerView","getView","_adsContainerDiv","createElement","id","style","position","top","appendChild","AdDisplayContainer","AdsLoader","addEventListener","AdsManagerLoadedEvent","Type","ADS_MANAGER_LOADED","_onAdsManagerLoaded","AdErrorEvent","AD_ERROR","aderror","adEvent","adsResponse","adsRequest","AdsRequest","linearAdSlotWidth","linearAdSlotHeight","nonLinearAdSlotWidth","nonLinearAdSlotHeight","requestAds","warn","resize","parseInt","getComputedStyle","enable","ENDED","_onMediaEnded","display","adsManagerLoadedEvent","adsRenderingSettings","AdsRenderingSettings","keys","forEach","setting","getAdsManager","_attachAdsManagerListeners","loaded","AdEvent","CONTENT_PAUSE_REQUESTED","adbreakstart","adloaded","STARTED","adstarted","adpaused","RESUMED","adresumed","FIRST_QUARTILE","adfirstquartile","MIDPOINT","admidpoint","THIRD_QUARTILE","adthirdquartile","CLICK","adclicked","SKIPPED","adskipped","COMPLETE","adcompleted","CONTENT_RESUME_REQUESTED","adbreakend","ALL_ADS_COMPLETED","alladscompleted","USER_CLOSE","userclosedad","VOLUME_CHANGED","advolumechanged","VOLUME_MUTED","admuted","LOG","muted","setVolume","volume","setInterval","remainingTime","getRemainingTime","getCurrentAd","getDuration","Number","isNumber","dispatchEvent","AD_PROGRESS","adProgress","clearInterval","src","ad","companions","googletag","companionsIds","i","length","sizeCriteria","companionAds","selectionCriteria","CompanionAdSelectionSettings","resourceType","ResourceType","ALL","creativeType","CreativeType","toLowerCase","SizeCriteria","SELECT_NEAR_MATCH","IGNORE","SELECT_EXACT_MATCH","getCompanionAds","companionAd","content","getContent","el","innerHTML","defaultConfig","enablePreloading","useStyledLinearAds","useStyledNonLinearAds","bitrate","autoAlign","ImaMiddleware","context","_context","next","sm","getStateMachine","state","initialUserAction","callNext","resumeAd","pauseAd","ImaStateMachine","transitions","from","to","AD_STARTED","getAd","isLinear","AD_RESUMED","AD_PAUSED","AD_SKIPPED","AD_COMPLETED","AD_BREAK_END","AD_LOADED","AD_FIRST_QUARTILE","AD_BREAK_START","AD_MIDPOINT","AD_THIRD_QUARTILE","USER_CLOSED_AD","AD_VOLUME_CHANGED","AD_MUTED","AD_CLICKED","methods","onAdloaded","onAdLoaded","onAdstarted","onAdStarted","onAdpaused","onAdPaused","onAdresumed","onAdEvent","onAdclicked","onAdClicked","onAdskipped","onAdSkipped","onAdcompleted","onAdCompleted","onAlladscompleted","onAllAdsCompleted","onAdbreakstart","onAdBreakStart","onAdbreakend","onAdBreakEnd","onAdfirstquartile","onAdmidpoint","onAdthirdquartile","onAderror","onAdError","onUserclosedad","onAdvolumechanged","onAdmuted","onEnterState","plugins","options","type","toUpperCase","transition","normalizeAdEvent","_maybeDisplayCompanionAds","_setVideoEndedCallbackEnabled","_resolveNextPromise","play","_startAdInterval","_maybePreloadContent","call","_showAdsContainer","_maybeSaveVideoCurrentTime","_maybeSetVideoCurrentTime","getError","normalizeAdError","adData","getAdData","getMessage","fatal","code","getErrorCode","message","extraAdData"],"mappings":"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AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,mBAAmB;AAChC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB,mCAAmC;AACpD,iBAAiB;AACjB;AACA,GAAG;;AAEH;AACA;AACA,wCAAwC,uBAAuB,yBAAyB;AACxF;AACA;AACA,wCAAwC,6BAA6B,eAAe;AACpF;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,yBAAyB,aAAa;AACtC;AACA,yBAAyB,WAAW;AACpC,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,qCAAqC,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC,4BAA4B,+CAA+C;AAC3E;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,6BAA6B;;AAE7B;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,qCAAqC,qBAAqB,kBAAkB;AAC5E,qCAAqC,sBAAsB,eAAe,EAAE;AAC5E,qCAAqC,sBAAsB,cAAc,GAAG;AAC5E,qCAAqC,2BAA2B,YAAY;;AAE5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,sCAAsC;AACtC;AACA,UAAU,UAAU;AACpB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G,8CAA8C,iEAAiE;AAC/G;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO;AACP;AACA,CAAC,E;;;;;;AC5pBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,cAAc;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,8DAA8D,+DAA+D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,mBAAmB;AAChC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,kBAAkB;AAClB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;AACP;AACA,CAAC,E","file":"playkit-ima.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"playkit-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"playkit-js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PlaykitJsIma\"] = factory(require(\"playkit-js\"));\n\telse\n\t\troot[\"PlaykitJsIma\"] = factory(root[\"Playkit\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dab993aa6527a9521640","// @flow\n\n/**\n * The ima plugin possible states.\n * @type {Object}\n */\nconst State: { [state: string]: string } = {\n  LOADING: \"loading\",\n  LOADED: \"loaded\",\n  PLAYING: \"playing\",\n  PAUSED: \"paused\",\n  IDLE: \"idle\",\n  DONE: \"done\"\n};\n\nexport default State;\n\n\n\n// WEBPACK FOOTER //\n// ./state.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"playkit-js\",\"commonjs2\":\"playkit-js\",\"amd\":\"playkit-js\",\"root\":\"Playkit\"}\n// module id = 1\n// module chunks = 0","// @flow\nimport ImaMiddleware from './ima-middleware'\nimport ImaStateMachine from './ima-state-machine'\nimport State from './state'\nimport {registerPlugin, BasePlugin} from 'playkit-js'\nimport {VERSION} from 'playkit-js'\nimport {PLAYER_NAME} from 'playkit-js'\nimport {BaseMiddleware} from 'playkit-js'\nimport {Utils} from 'playkit-js'\n\n/**\n * The plugin name.\n * @type {string}\n * @const\n */\nconst pluginName: string = \"ima\";\n/**\n * The ads container id.\n * @type {string}\n * @const\n */\nconst ADS_CONTAINER_ID: string = \"ads-container\";\n\n/**\n * The ima plugin.\n * @classdesc\n */\nexport default class Ima extends BasePlugin {\n\n  /**\n   * The default configuration of the plugin.\n   * @type {Object}\n   * @static\n   */\n  static defaultConfig: Object = {\n    debug: false,\n    companions: {},\n    adsRenderingSettings: {\n      enablePreloading: false,\n      useStyledLinearAds: false,\n      useStyledNonLinearAds: false,\n      bitrate: -1,\n      autoAlign: true\n    }\n  };\n\n  /**\n   * The sdk lib url.\n   * @type {string}\n   * @static\n   */\n  static IMA_SDK_LIB_URL: string = \"//imasdk.googleapis.com/js/sdkloader/ima3.js\";\n  /**\n   * The debug sdk lib url.\n   * @type {string}\n   * @static\n   */\n  static IMA_SDK_DEBUG_LIB_URL: string = \"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js\";\n  /**\n   * Promise for loading the plugin.\n   * Will be resolved after:\n   * 1) Ima script has been loaded in the page.\n   * 2) The ads manager has been loaded and ready to start.\n   * @type {Promise<*>}\n   * @member\n   * @public\n   */\n  loadPromise: DeferredPromise;\n  /**\n   * The finite state machine of the plugin.\n   * @member\n   * @private\n   */\n  _stateMachine: any;\n  /**\n   * The sdk api.\n   * @member\n   * @private\n   */\n  _sdk: any;\n  /**\n   * The ads container dom element.\n   * @member\n   * @private\n   */\n  _adsContainerDiv: HTMLElement;\n  /**\n   * The ima ads container object.\n   */\n  _adDisplayContainer: any;\n  /**\n   * The ima ads manager.\n   * @member\n   * @private\n   */\n  _adsManager: any;\n  /**\n   * The ima ads loader.\n   * @member\n   * @private\n   */\n  _adsLoader: any;\n  /**\n   * The content tracker.\n   * @member\n   * @private\n   */\n  _contentPlayheadTracker: Object;\n  /**\n   * Flag to know when content complete.\n   * @member\n   * @private\n   */\n  _contentComplete: boolean;\n  /**\n   * The ad interval timer.\n   * @member\n   * @private\n   */\n  _intervalTimer: ?number;\n  /**\n   * Video current time before ads.\n   * On custom playback when only one video tag playing, save the video current time.\n   * @member\n   * @private\n   */\n  _videoLastCurrentTime: ?number;\n  /**\n   * The promise which when resolved starts the next handler in the middleware chain.\n   * @member\n   * @private\n   */\n  _nextPromise: ?DeferredPromise;\n\n  /**\n   * Whether the ima plugin is valid.\n   * @static\n   * @override\n   * @public\n   */\n  static isValid() {\n    return true;\n  }\n\n  /**\n   * @constructor\n   * @param {string} name - The plugin name.\n   * @param {Player} player - The player instance.\n   * @param {Object} config - The plugin config.\n   */\n  constructor(name: string, player: Player, config: Object) {\n    super(Utils.String.capitlize(name), player, config);\n    this._stateMachine = new ImaStateMachine(this);\n    this._intervalTimer = null;\n    this._videoLastCurrentTime = null;\n    this._adsManager = null;\n    this._contentComplete = false;\n    this._contentPlayheadTracker = {currentTime: 0, previousTime: 0, seeking: false, duration: 0};\n    this._addBindings();\n    this._init();\n  }\n\n  /**\n   * Plays ad on demand.\n   * @param {string} adTagUrl - The ad tag url to play.\n   * @returns {void}\n   */\n  playAdNow(adTagUrl: string): void {\n    super.updateConfig({adTagUrl: adTagUrl});\n    this.loadPromise = Utils.Object.defer();\n    this.destroy();\n    this._addBindings();\n    this._initAdsLoader();\n    this._requestAds();\n    this.loadPromise.then(this._startAdsManager.bind(this));\n  }\n\n  /**\n   * Skips on an ad.\n   * @returns {void}\n   */\n  skipAd(): void {\n    this.logger.debug(\"Skip ad\");\n    if (this._adsManager) {\n      if (this._adsManager.getAdSkippableState()) {\n        this._adsManager.skip();\n      } else if (this.config.skipSupport) {\n        this._adsManager.stop();\n      }\n    }\n  }\n\n  /**\n   * Resuming the ad.\n   * @public\n   * @returns {DeferredPromise} - The promise which when resolved starts the next handler in the middleware chain.\n   */\n  resumeAd(): ?DeferredPromise {\n    this.logger.debug(\"Resume ad\");\n    this._nextPromise = Utils.Object.defer();\n    this._adsManager.resume();\n    return this._nextPromise;\n  }\n\n  /**\n   * Pausing the ad.\n   * @public\n   * @returns {DeferredPromise} - The promise which when resolved starts the next handler in the middleware chain.\n   */\n  pauseAd(): ?DeferredPromise {\n    this.logger.debug(\"Pause ad\");\n    this._nextPromise = Utils.Object.defer();\n    this._adsManager.pause();\n    return this._nextPromise;\n  }\n\n  /**\n   * Updates the configuration of the plugin.\n   * @param {Object} update - The fully or partially updated configuration.\n   * @override\n   * @returns {void}\n   */\n  updateConfig(update: Object): void {\n    super.updateConfig(update);\n    if (update.adTagUrl && this._stateMachine.is(State.LOADING)) {\n      this._requestAds();\n    }\n  }\n\n  /**\n   * Gets the state machine.\n   * @public\n   * @returns {any} - The state machine.\n   */\n  getStateMachine(): any {\n    return this._stateMachine;\n  }\n\n  /**\n   * Gets the middleware.\n   * @public\n   * @returns {ImaMiddleware} - The middleware api.\n   */\n  getMiddlewareImpl(): BaseMiddleware {\n    return new ImaMiddleware(this);\n  }\n\n  /**\n   * Destroys the plugin.\n   * @override\n   * @public\n   * @returns {void}\n   */\n  destroy(): void {\n    this.logger.debug(\"destroy\");\n    this.eventManager.destroy();\n    this._stopAdInterval();\n    this._hideAdsContainer();\n    if (this._adsManager) {\n      this._adsManager.destroy();\n    }\n    if (this._adsLoader) {\n      this._adsLoader.contentComplete();\n    }\n    this._adsManager = null;\n    this._adsLoader = null;\n    this._contentComplete = false;\n    this._intervalTimer = null;\n    this._videoLastCurrentTime = null;\n    this._contentPlayheadTracker = {currentTime: 0, previousTime: 0, seeking: false, duration: 0};\n  }\n\n  /**\n   * Initialize the ads for the first time.\n   * @public\n   * @returns {?DeferredPromise} - The promise which when resolved starts the next handler in the middleware chain.\n   */\n  initialUserAction(): ?DeferredPromise {\n    try {\n      this.logger.debug(\"Initial user action\");\n      this._nextPromise = Utils.Object.defer();\n      this._adDisplayContainer.initialize();\n      this._startAdsManager();\n    } catch (adError) {\n      this.logger.error(adError);\n      this.destroy();\n    }\n    return this._nextPromise;\n  }\n\n  /**\n   * Starts the ads manager.\n   * @private\n   * @returns {void}\n   */\n  _startAdsManager(): void {\n    let playerViewSize = this._getPlayerViewSize();\n    if (this._adsManager.isCustomPlaybackUsed()) {\n      this.logger.debug(\"Waiting for loadedmetada event\");\n      this.eventManager.listen(this.player, this.player.Event.LOADED_METADATA, () => {\n        this.logger.debug(\"Loadedmetada event raised: start ads manager\");\n        this.eventManager.unlisten(this.player, this.player.Event.LOADED_METADATA);\n        this._adsManager.init(playerViewSize.width, playerViewSize.height, this._sdk.ViewMode.NORMAL);\n        this._adsManager.start();\n      });\n      this.logger.debug(\"Load player\");\n      this.player.load();\n    } else {\n      this.logger.debug(\"Start ads manager\");\n      this._adsManager.init(playerViewSize.width, playerViewSize.height, this._sdk.ViewMode.NORMAL);\n      this._adsManager.start();\n    }\n  }\n\n  /**\n   * Adding bindings.\n   * @private_addBindings\n   * @returns {void}\n   */\n  _addBindings(): void {\n    this.eventManager.listen(window, 'resize', this._resizeAd.bind(this));\n    this.eventManager.listen(this.player.getVideoElement(), 'resize', this._resizeAd.bind(this));\n    this.eventManager.listen(this.player, this.player.Event.LOADED_METADATA, this._onLoadedMetadata.bind(this));\n    this.eventManager.listen(this.player, this.player.Event.TIME_UPDATE, this._onMediaTimeUpdate.bind(this));\n    this.eventManager.listen(this.player, this.player.Event.SEEKING, this._onMediaSeeking.bind(this));\n    this.eventManager.listen(this.player, this.player.Event.SEEKED, this._onMediaSeeked.bind(this));\n    this.eventManager.listen(this.player, this.player.Event.VOLUME_CHANGE, this._syncPlayerVolume.bind(this));\n  }\n\n  /**\n   * Initializing the plugin.\n   * @private\n   * @returns {void}\n   */\n  _init(): void {\n    this.loadPromise = Utils.Object.defer();\n    (window.google && window.google.ima ? Promise.resolve() : Utils.Dom.loadScriptAsync(this.config.debug ? Ima.IMA_SDK_DEBUG_LIB_URL : Ima.IMA_SDK_LIB_URL))\n      .then(() => {\n        this._sdk = window.google.ima;\n        this.logger.debug(\"IMA SDK version: \" + this._sdk.VERSION);\n        this._initImaSettings();\n        this._initAdsContainer();\n        this._initAdsLoader();\n        this._requestAds();\n      }).catch((e) => {\n      this.loadPromise.reject(e);\n    });\n  }\n\n  /**\n   * Init ima settings.\n   * @private\n   * @returns {void}\n   */\n  _initImaSettings(): void {\n    this._sdk.settings.setPlayerType(PLAYER_NAME);\n    this._sdk.settings.setPlayerVersion(VERSION);\n    this._sdk.settings.setVpaidAllowed(true);\n    this._sdk.settings.setVpaidMode(this._sdk.ImaSdkSettings.VpaidMode.ENABLED);\n    this._sdk.settings.setDisableCustomPlaybackForIOS10Plus(true);\n  }\n\n  /**\n   * Initializing the ad container.\n   * @private\n   * @returns {void}\n   */\n  _initAdsContainer(): void {\n    this.logger.debug(\"Init ads container\");\n    let adsContainerDiv = Utils.Dom.getElementById(ADS_CONTAINER_ID);\n    if (!adsContainerDiv) {\n      let playerView = this.player.getView();\n      this._adsContainerDiv = Utils.Dom.createElement('div');\n      this._adsContainerDiv.id = ADS_CONTAINER_ID + playerView.id;\n      this._adsContainerDiv.style.position = \"absolute\";\n      this._adsContainerDiv.style.top = \"0px\";\n      Utils.Dom.appendChild(playerView, this._adsContainerDiv);\n    } else {\n      this._adsContainerDiv = adsContainerDiv;\n    }\n    this._adDisplayContainer = new this._sdk.AdDisplayContainer(this._adsContainerDiv, this.player.getVideoElement());\n  }\n\n  /**\n   * Initializing the ads loader.\n   * @private\n   * @returns {void}\n   */\n  _initAdsLoader(): void {\n    this.logger.debug(\"Init ads loader\");\n    this._adsLoader = new this._sdk.AdsLoader(this._adDisplayContainer);\n    this._adsLoader.addEventListener(this._sdk.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this._onAdsManagerLoaded.bind(this));\n    this._adsLoader.addEventListener(this._sdk.AdErrorEvent.Type.AD_ERROR, adEvent => this._stateMachine.aderror(adEvent));\n  }\n\n  /**\n   * Requests the ads from the ads loader.\n   * @private\n   * @returns {void}\n   */\n  _requestAds(): void {\n    if (this.config.adTagUrl || this.config.adsResponse) {\n      this.logger.debug(\"Request ads\");\n      // Request video ads\n      let adsRequest = new this._sdk.AdsRequest();\n      if (this.config.adTagUrl) {\n        adsRequest.adTagUrl = this.config.adTagUrl;\n      } else {\n        adsRequest.adsResponse = this.config.adsResponse;\n      }\n      let playerViewSize = this._getPlayerViewSize();\n      adsRequest.linearAdSlotWidth = playerViewSize.width;\n      adsRequest.linearAdSlotHeight = playerViewSize.height;\n      adsRequest.nonLinearAdSlotWidth = playerViewSize.width;\n      adsRequest.nonLinearAdSlotHeight = playerViewSize.height / 3;\n      this._adsLoader.requestAds(adsRequest);\n    } else {\n      this.logger.warn(\"Missing ad tag url: create plugin without requesting ads\");\n    }\n  }\n\n  /**\n   * Resize event handler.\n   * @private\n   * @returns {void}\n   */\n  _resizeAd() {\n    if (this._sdk && this._adsManager) {\n      let playerViewSize = this._getPlayerViewSize();\n      this._adsManager.resize(playerViewSize.width, playerViewSize.height, this._sdk.ViewMode.NORMAL);\n    }\n  }\n\n  /**\n   * Gets the player view width and height.\n   * @return {Object} - The player sizes.\n   * @private\n   */\n  _getPlayerViewSize(): Object {\n    let playerView = this.player.getView();\n    let width = parseInt(getComputedStyle(playerView).width, 10);\n    let height = parseInt(getComputedStyle(playerView).height, 10);\n    return {width: width, height: height};\n  }\n\n  /**\n   * Loadedmetada event handler.\n   * @private\n   * @returns {void}\n   */\n  _onLoadedMetadata(): void {\n    this._contentPlayheadTracker.duration = this.player.duration;\n  }\n\n  /**\n   * Timeupdate event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaTimeUpdate(): void {\n    if (!this._contentPlayheadTracker.seeking) {\n      this._contentPlayheadTracker.previousTime = this._contentPlayheadTracker.currentTime;\n      this._contentPlayheadTracker.currentTime = this.player.currentTime;\n    }\n  }\n\n  /**\n   * Seeking event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaSeeking(): void {\n    this._contentPlayheadTracker.seeking = true;\n  }\n\n  /**\n   * Seeked event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaSeeked(): void {\n    this._contentPlayheadTracker.seeking = false;\n  }\n\n  /**\n   * Removes or adds the listener for ended event.\n   * @param {boolean} enable - Whether to enable the event listener or not.\n   * @private\n   * @return {void}\n   */\n  _setVideoEndedCallbackEnabled(enable: boolean): void {\n    if (enable) {\n      this.eventManager.listen(this.player, this.player.Event.ENDED, this._onMediaEnded.bind(this));\n    } else {\n      this.eventManager.unlisten(this.player, this.player.Event.ENDED);\n    }\n  }\n\n  /**\n   * Maybe save the video current time before ads starts (on ios this is necessary).\n   * @private\n   * @return {void}\n   */\n  _maybeSaveVideoCurrentTime(): void {\n    if (this._adsManager.isCustomPlaybackUsed() && this.player.currentTime && this.player.currentTime > 0) {\n      this.logger.debug(\"Custom playback used: save current time before ads\", this.player.currentTime);\n      this._videoLastCurrentTime = this.player.currentTime;\n    }\n  }\n\n  /**\n   * Maybe sets the video current time after ads finished (on ios this is necessary).\n   * @private\n   * @return {void}\n   */\n  _maybeSetVideoCurrentTime(): void {\n    if (this._videoLastCurrentTime) {\n      this.logger.debug(\"Custom playback used: set current time after ads\", this.player.currentTime);\n      this.player.currentTime = this._videoLastCurrentTime;\n      this._videoLastCurrentTime = null;\n    }\n  }\n\n  /**\n   * Ended event handler.\n   * @private\n   * @returns {void}\n   */\n  _onMediaEnded(): void {\n    this.logger.debug(\"Media ended\");\n    this._adsLoader.contentComplete();\n    this._contentComplete = true;\n  }\n\n  /**\n   * Shows the ads container.\n   * @private\n   * @returns {void}\n   */\n  _showAdsContainer(): void {\n    if (this._adsContainerDiv) {\n      this._adsContainerDiv.style.display = \"\";\n    }\n  }\n\n  /**\n   * Hides the ads container.\n   * @private\n   * @returns {void}\n   */\n  _hideAdsContainer(): void {\n    if (this._adsContainerDiv) {\n      this._adsContainerDiv.style.display = \"none\";\n    }\n  }\n\n  /**\n   * The ads manager loaded handler.\n   * @param {any} adsManagerLoadedEvent - The event data.\n   * @private\n   * @returns {void}\n   */\n  _onAdsManagerLoaded(adsManagerLoadedEvent: any): void {\n    this.logger.debug('Ads manager loaded');\n    let adsRenderingSettings = new this._sdk.AdsRenderingSettings();\n    Object.keys(this.config.adsRenderingSettings).forEach((setting) => {\n      if (adsRenderingSettings[setting]) {\n        adsRenderingSettings[setting] = this.config.adsRenderingSettings[setting];\n      }\n    });\n    this._adsManager = adsManagerLoadedEvent.getAdsManager(this._contentPlayheadTracker, adsRenderingSettings);\n    this._attachAdsManagerListeners();\n    this._syncPlayerVolume();\n    this._stateMachine.loaded();\n    this.loadPromise.resolve();\n  }\n\n  /**\n   * Attach the ads manager listeners.\n   * @private\n   * @returns {void}\n   */\n  _attachAdsManagerListeners(): void {\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.CONTENT_PAUSE_REQUESTED, adEvent => this._stateMachine.adbreakstart(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.LOADED, adEvent => this._stateMachine.adloaded(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.STARTED, adEvent => this._stateMachine.adstarted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.PAUSED, adEvent => this._stateMachine.adpaused(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.RESUMED, adEvent => this._stateMachine.adresumed(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.FIRST_QUARTILE, adEvent => this._stateMachine.adfirstquartile(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.MIDPOINT, adEvent => this._stateMachine.admidpoint(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.THIRD_QUARTILE, adEvent => this._stateMachine.adthirdquartile(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.CLICK, adEvent => this._stateMachine.adclicked(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.SKIPPED, adEvent => this._stateMachine.adskipped(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.COMPLETE, adEvent => this._stateMachine.adcompleted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.CONTENT_RESUME_REQUESTED, adEvent => this._stateMachine.adbreakend(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.ALL_ADS_COMPLETED, adEvent => this._stateMachine.alladscompleted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.USER_CLOSE, adEvent => this._stateMachine.userclosedad(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.VOLUME_CHANGED, adEvent => this._stateMachine.advolumechanged(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.VOLUME_MUTED, adEvent => this._stateMachine.admuted(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdEvent.Type.LOG, adEvent => this._stateMachine.aderror(adEvent));\n    this._adsManager.addEventListener(this._sdk.AdErrorEvent.Type.AD_ERROR, adEvent => this._stateMachine.aderror(adEvent));\n  }\n\n  /**\n   * Syncs the player volume.\n   * @private\n   * @returns {void}\n   */\n  _syncPlayerVolume(): void {\n    if (this._adsManager) {\n      if (this.player.muted) {\n        this._adsManager.setVolume(0);\n      } else {\n        this._adsManager.setVolume(this.player.volume);\n      }\n    }\n  }\n\n  /**\n   * Starts ad interval timer.\n   * @private\n   * @returns {void}\n   */\n  _startAdInterval(): void {\n    this._stopAdInterval();\n    this._intervalTimer = setInterval(() => {\n      if (this._stateMachine.is(State.PLAYING)) {\n        let remainingTime = this._adsManager.getRemainingTime();\n        let duration = this._adsManager.getCurrentAd().getDuration();\n        let currentTime = duration - remainingTime;\n        if (Utils.Number.isNumber(duration) && Utils.Number.isNumber(currentTime)) {\n          this.dispatchEvent(this.player.Event.AD_PROGRESS, {\n            adProgress: {\n              currentTime: currentTime,\n              duration: duration\n            }\n          });\n        }\n      }\n    }, 300);\n  }\n\n  /**\n   * Stops ads interval timer.\n   * @private\n   * @returns {void}\n   */\n  _stopAdInterval(): void {\n    if (this._intervalTimer) {\n      clearInterval(this._intervalTimer);\n      this._intervalTimer = null;\n    }\n  }\n\n  /**\n   * Maybe pre loaded the player.\n   * @private\n   * @returns {void}\n   */\n  _maybePreloadContent(): void {\n    if (!this.player.src && !this._adsManager.isCustomPlaybackUsed()) {\n      this.logger.debug(\"Preloading content\");\n      this.player.load();\n    }\n  }\n\n  /**\n   * Resolves the next promise to let the next handler in the middleware chain start.\n   * @private\n   * @returns {void}\n   */\n  _resolveNextPromise(): void {\n    if (this._nextPromise) {\n      this._nextPromise.resolve();\n      this._nextPromise = null;\n    }\n  }\n\n  /**\n   * Displays companion ads using the Ad API.\n   * @param {any} ad - The ad object.\n   * @private\n   * @returns {void}\n   */\n  _maybeDisplayCompanionAds(ad: any): void {\n    if (this.config.companions && !window.googletag) {\n      let companionsIds = Object.keys(this.config.companions);\n      for (let i = 0; i < companionsIds.length; i++) {\n        let id = companionsIds[i];\n        let width = this.config.companions[id].width;\n        let height = this.config.companions[id].height;\n        let sizeCriteria = this.config.companions[id].sizeCriteria || '';\n        let companionAds = [];\n        try {\n          let selectionCriteria = new this._sdk.CompanionAdSelectionSettings();\n          selectionCriteria.resourceType = this._sdk.CompanionAdSelectionSettings.ResourceType.ALL;\n          selectionCriteria.creativeType = this._sdk.CompanionAdSelectionSettings.CreativeType.ALL;\n          switch (sizeCriteria.toLowerCase()) {\n            case 'selectnearmatch':\n              selectionCriteria.sizeCriteria = this._sdk.CompanionAdSelectionSettings.SizeCriteria.SELECT_NEAR_MATCH;\n              break;\n            case 'ignore':\n              selectionCriteria.sizeCriteria = this._sdk.CompanionAdSelectionSettings.SizeCriteria.IGNORE;\n              break;\n            case 'selectexactmatch':\n            default:\n              selectionCriteria.sizeCriteria = this._sdk.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH;\n              break;\n          }\n          companionAds = ad.getCompanionAds(width, height, selectionCriteria);\n          if (companionAds.length > 0) {\n            let companionAd = companionAds[0];\n            let content = companionAd.getContent();\n            let el = Utils.Dom.getElementById(id);\n            if (el) {\n              el.innerHTML = content;\n            }\n          }\n        } catch (e) {\n          this.logger.error(e);\n        }\n      }\n    }\n  }\n}\n\nregisterPlugin(pluginName, Ima);\n\n\n\n// WEBPACK FOOTER //\n// ./ima.js","// @flow\nimport {BaseMiddleware} from 'playkit-js'\nimport State from './state'\n\n/**\n * Middleware implementation for ima plugin.\n * @classdesc\n */\nexport default class ImaMiddleware extends BaseMiddleware {\n  /**\n   * The id of the ima middleware.\n   * @type {string}\n   * @public\n   */\n  id: string = \"ImaMiddleware\";\n  /**\n   * The plugin context.\n   * @member\n   * @private\n   */\n  _context: any;\n\n  /**\n   * @constructor\n   * @param {any} context - The plugin context.\n   */\n  constructor(context: any) {\n    super();\n    this._context = context;\n  }\n\n  /**\n   * Play middleware handler.\n   * @param {Function} next - The next play handler in the middleware chain.\n   * @returns {void}\n   */\n  play(next: Function): void {\n    this._context.loadPromise.then(() => {\n      let sm = this._context.getStateMachine();\n      switch (sm.state) {\n        case State.LOADED:\n          this._context.initialUserAction()\n            .then(() => {\n              this.callNext(next);\n            });\n          break;\n        case State.PAUSED:\n          this._context.resumeAd()\n            .then(() => {\n              this.callNext(next);\n            });\n          break;\n        default:\n          this.callNext(next);\n          break;\n      }\n    }).catch((e) => {\n      this._context.destroy();\n      this._context.logger.error(e);\n      this.callNext(next);\n    });\n  }\n\n  /**\n   * Pause middleware handler.\n   * @param {Function} next - The next pause handler in the middleware chain.\n   * @returns {void}\n   */\n  pause(next: Function): void {\n    let sm = this._context.getStateMachine();\n    switch (sm.state) {\n      case State.PLAYING:\n        this._context.pauseAd();\n        break;\n      default:\n        this.callNext(next);\n        break;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ima-middleware.js","// @flow\nimport StateMachine from 'javascript-state-machine'\nimport StateMachineHistory from 'javascript-state-machine/lib/history'\nimport State from './state'\n\n/**\n * Finite state machine for ima plugin.\n * @classdesc\n */\nexport default class ImaStateMachine {\n  /**\n   * @constructor\n   * @param {any} context - The plugin context.\n   */\n  constructor(context: any) {\n    return new StateMachine({\n      init: State.LOADING,\n      transitions: [\n        {\n          name: 'loaded',\n          from: [State.LOADING, State.IDLE, State.DONE],\n          to: State.LOADED\n        },\n        {\n          name: context.player.Event.AD_STARTED,\n          from: [State.LOADED, State.IDLE, State.PAUSED],\n          to: function (adEvent: any): string {\n            let ad = adEvent.getAd();\n            if (!ad.isLinear()) {\n              return State.IDLE;\n            }\n            return State.PLAYING;\n          }\n        },\n        {\n          name: context.player.Event.AD_RESUMED,\n          from: State.PAUSED,\n          to: State.PLAYING\n        },\n        {\n          name: context.player.Event.AD_PAUSED,\n          from: State.PLAYING,\n          to: State.PAUSED\n        },\n        {\n          name: context.player.Event.AD_SKIPPED,\n          from: [State.PLAYING, State.PAUSED],\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.AD_COMPLETED,\n          from: State.PLAYING,\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.ALL_ADS_COMPLETED,\n          from: State.IDLE,\n          to: State.DONE\n        },\n        {\n          name: context.player.Event.AD_BREAK_END,\n          from: [State.IDLE, State.LOADED],\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.AD_ERROR,\n          from: [State.LOADED, State.PLAYING, State.PAUSED, State.LOADING],\n          to: State.IDLE\n        },\n        {\n          name: context.player.Event.AD_LOADED,\n          from: [State.IDLE, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_FIRST_QUARTILE,\n          from: State.PLAYING\n        },\n        {\n          name: context.player.Event.AD_BREAK_START,\n          from: [State.IDLE, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_MIDPOINT,\n          from: State.PLAYING\n        },\n        {\n          name: context.player.Event.AD_THIRD_QUARTILE,\n          from: State.PLAYING\n        },\n        {\n          name: context.player.Event.USER_CLOSED_AD,\n          from: [State.IDLE, State.PLAYING, State.PAUSED]\n        },\n        {\n          name: context.player.Event.AD_VOLUME_CHANGED,\n          from: [State.PLAYING, State.PAUSED, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_MUTED,\n          from: [State.PLAYING, State.PAUSED, State.LOADED]\n        },\n        {\n          name: context.player.Event.AD_CLICKED,\n          from: [State.PLAYING, State.PAUSED]\n        }\n      ],\n      methods: {\n        onAdloaded: onAdLoaded.bind(context),\n        onAdstarted: onAdStarted.bind(context),\n        onAdpaused: onAdPaused.bind(context),\n        onAdresumed: onAdEvent.bind(context),\n        onAdclicked: onAdClicked.bind(context),\n        onAdskipped: onAdSkipped.bind(context),\n        onAdcompleted: onAdCompleted.bind(context),\n        onAlladscompleted: onAllAdsCompleted.bind(context),\n        onAdbreakstart: onAdBreakStart.bind(context),\n        onAdbreakend: onAdBreakEnd.bind(context),\n        onAdfirstquartile: onAdEvent.bind(context),\n        onAdmidpoint: onAdEvent.bind(context),\n        onAdthirdquartile: onAdEvent.bind(context),\n        onAderror: onAdError.bind(context),\n        onUserclosedad: onAdEvent.bind(context),\n        onAdvolumechanged: onAdEvent.bind(context),\n        onAdmuted: onAdEvent.bind(context),\n        onEnterState: onEnterState.bind(context),\n      },\n      plugins: [\n        new StateMachineHistory()\n      ]\n    });\n  }\n}\n\n/**\n * LOADED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdLoaded(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this.dispatchEvent(options.transition, normalizeAdEvent(adEvent));\n}\n\n/**\n * STARTED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdStarted(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  let ad = adEvent.getAd();\n  this._resizeAd();\n  this._maybeDisplayCompanionAds(ad);\n  if (!ad.isLinear()) {\n    this._setVideoEndedCallbackEnabled(true);\n    if (this._nextPromise) {\n      this._resolveNextPromise();\n    } else {\n      this.player.play();\n    }\n  } else {\n    this._startAdInterval();\n  }\n  this.dispatchEvent(options.transition);\n  this._maybePreloadContent();\n}\n\n/**\n * CLICKED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdClicked(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  if (this._stateMachine.is(State.PLAYING)) {\n    this.pauseAd();\n  } else {\n    this.resumeAd();\n  }\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * PAUSED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdPaused(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  if (this._nextPromise) {\n    this._resolveNextPromise();\n  }\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * COMPLETE event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdCompleted(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  let ad = adEvent.getAd();\n  if (ad.isLinear()) {\n    this._stopAdInterval();\n  }\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * ALL_ADS_COMPLETED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAllAdsCompleted(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  onAdBreakEnd.call(this, options, adEvent);\n  this.destroy();\n}\n\n/**\n * CONTENT_PAUSED_REQUESTED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdBreakStart(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this._showAdsContainer();\n  this.player.pause();\n  this._setVideoEndedCallbackEnabled(false);\n  this._maybeSaveVideoCurrentTime();\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * CONTENT_RESUMED_REQUESTED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdBreakEnd(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this._setVideoEndedCallbackEnabled(true);\n  if (!this._contentComplete) {\n    this._hideAdsContainer();\n    this._maybeSetVideoCurrentTime();\n    if (this._nextPromise) {\n      this._resolveNextPromise();\n    } else {\n      this.player.play();\n    }\n  }\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * ERROR event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdError(options: Object, adEvent: any): void {\n  if (adEvent.type === \"adError\") {\n    this.logger.debug(adEvent.type.toUpperCase());\n    let adError = adEvent.getError();\n    if (this.loadPromise) {\n      this.loadPromise.reject(adError);\n    }\n    if (this._nextPromise) {\n      this._nextPromise.reject(adError);\n    }\n    this.dispatchEvent(options.transition, normalizeAdError(adError, true));\n  } else {\n    this.logger.debug(adEvent.type.toUpperCase());\n    let adData = adEvent.getAdData();\n    let adError = adData.adError;\n    if (adData.adError) {\n      this.logger.error('Non-fatal error occurred: ' + adError.getMessage());\n      this.dispatchEvent(this.player.Event.AD_ERROR, normalizeAdError(adError, false));\n    }\n  }\n}\n\n/**\n * SKIPPED event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdSkipped(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this._stopAdInterval();\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * General event handler.\n * @param {Object} options - fsm event data.\n * @param {any} adEvent - ima event data.\n * @returns {void}\n */\nfunction onAdEvent(options: Object, adEvent: any): void {\n  this.logger.debug(adEvent.type.toUpperCase());\n  this.dispatchEvent(options.transition);\n}\n\n/**\n * Enter state handler.\n * @param {Object} options - fsm event data.\n * @returns {void}\n */\nfunction onEnterState(options: Object): void {\n  if (options.from !== options.to) {\n    this.logger.debug(\"Change state: \" + options.from + \" => \" + options.to);\n  }\n}\n\n/**\n * Normalize the ima ad error object.\n * @param {any} adError - The ima ad error object.\n * @param {boolean} fatal - Whether the error is fatal.\n * @returns {Object} - The normalized ad error object.\n */\nfunction normalizeAdError(adError: any, fatal: boolean): Object {\n  return {\n    fatal: fatal,\n    error: {\n      code: adError.getErrorCode(),\n      message: adError.getMessage()\n    }\n  };\n}\n\n/**\n * Normalize the ima ad event object.\n * @param {any} adEvent - The ima ad error object.\n * @returns {Object} - The normalized ad event object.\n */\nfunction normalizeAdEvent(adEvent: any): Object {\n  return {\n    ad: adEvent.getAd(),\n    extraAdData: adEvent.getAdData()\n  };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./ima-state-machine.js","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"StateMachine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateMachine\"] = factory();\n\telse\n\t\troot[\"StateMachine\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function(target, sources) {\n  var n, source, key;\n  for(n = 1 ; n < arguments.length ; n++) {\n    source = arguments[n];\n    for(key in source) {\n      if (source.hasOwnProperty(key))\n        target[key] = source[key];\n    }\n  }\n  return target;\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar mixin = __webpack_require__(0);\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = {\n\n  build: function(target, config) {\n    var n, max, plugin, plugins = config.plugins;\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n];\n      if (plugin.methods)\n        mixin(target, plugin.methods);\n      if (plugin.properties)\n        Object.defineProperties(target, plugin.properties);\n    }\n  },\n\n  hook: function(fsm, name, additional) {\n    var n, max, method, plugin,\n        plugins = fsm.config.plugins,\n        args    = [fsm.context];\n\n    if (additional)\n      args = args.concat(additional)\n\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n]\n      method = plugins[n][name]\n      if (method)\n        method.apply(plugin, args);\n    }\n  }\n\n}\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nfunction camelize(label) {\n\n  if (label.length === 0)\n    return label;\n\n  var n, result, word, words = label.split(/[_-]/);\n\n  // single word with first character already lowercase, return untouched\n  if ((words.length === 1) && (words[0][0].toLowerCase() === words[0][0]))\n    return label;\n\n  result = words[0].toLowerCase();\n  for(n = 1 ; n < words.length ; n++) {\n    result = result + words[n].charAt(0).toUpperCase() + words[n].substring(1).toLowerCase();\n  }\n\n  return result;\n}\n\n//-------------------------------------------------------------------------------------------------\n\ncamelize.prepended = function(prepend, label) {\n  label = camelize(label);\n  return prepend + label[0].toUpperCase() + label.substring(1);\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = camelize;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar mixin    = __webpack_require__(0),\n    camelize = __webpack_require__(2);\n\n//-------------------------------------------------------------------------------------------------\n\nfunction Config(options, StateMachine) {\n\n  options = options || {};\n\n  this.options     = options; // preserving original options can be useful (e.g visualize plugin)\n  this.defaults    = StateMachine.defaults;\n  this.states      = [];\n  this.transitions = [];\n  this.map         = {};\n  this.lifecycle   = this.configureLifecycle();\n  this.init        = this.configureInitTransition(options.init);\n  this.data        = this.configureData(options.data);\n  this.methods     = this.configureMethods(options.methods);\n\n  this.map[this.defaults.wildcard] = {};\n\n  this.configureTransitions(options.transitions || []);\n\n  this.plugins = this.configurePlugins(options.plugins, StateMachine.plugin);\n\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmixin(Config.prototype, {\n\n  addState: function(name) {\n    if (!this.map[name]) {\n      this.states.push(name);\n      this.addStateLifecycleNames(name);\n      this.map[name] = {};\n    }\n  },\n\n  addStateLifecycleNames: function(name) {\n    this.lifecycle.onEnter[name] = camelize.prepended('onEnter', name);\n    this.lifecycle.onLeave[name] = camelize.prepended('onLeave', name);\n    this.lifecycle.on[name]      = camelize.prepended('on',      name);\n  },\n\n  addTransition: function(name) {\n    if (this.transitions.indexOf(name) < 0) {\n      this.transitions.push(name);\n      this.addTransitionLifecycleNames(name);\n    }\n  },\n\n  addTransitionLifecycleNames: function(name) {\n    this.lifecycle.onBefore[name] = camelize.prepended('onBefore', name);\n    this.lifecycle.onAfter[name]  = camelize.prepended('onAfter',  name);\n    this.lifecycle.on[name]       = camelize.prepended('on',       name);\n  },\n\n  mapTransition: function(transition) {\n    var name = transition.name,\n        from = transition.from,\n        to   = transition.to;\n    this.addState(from);\n    if (typeof to !== 'function')\n      this.addState(to);\n    this.addTransition(name);\n    this.map[from][name] = transition;\n    return transition;\n  },\n\n  configureLifecycle: function() {\n    return {\n      onBefore: { transition: 'onBeforeTransition' },\n      onAfter:  { transition: 'onAfterTransition'  },\n      onEnter:  { state:      'onEnterState'       },\n      onLeave:  { state:      'onLeaveState'       },\n      on:       { transition: 'onTransition'       }\n    };\n  },\n\n  configureInitTransition: function(init) {\n    if (typeof init === 'string') {\n      return this.mapTransition(mixin({}, this.defaults.init, { to: init, active: true }));\n    }\n    else if (typeof init === 'object') {\n      return this.mapTransition(mixin({}, this.defaults.init, init, { active: true }));\n    }\n    else {\n      this.addState(this.defaults.init.from);\n      return this.defaults.init;\n    }\n  },\n\n  configureData: function(data) {\n    if (typeof data === 'function')\n      return data;\n    else if (typeof data === 'object')\n      return function() { return data; }\n    else\n      return function() { return {};  }\n  },\n\n  configureMethods: function(methods) {\n    return methods || {};\n  },\n\n  configurePlugins: function(plugins, builtin) {\n    plugins = plugins || [];\n    var n, max, plugin;\n    for(n = 0, max = plugins.length ; n < max ; n++) {\n      plugin = plugins[n];\n      if (typeof plugin === 'function')\n        plugins[n] = plugin = plugin()\n      if (plugin.configure)\n        plugin.configure(this);\n    }\n    return plugins\n  },\n\n  configureTransitions: function(transitions) {\n    var i, n, transition, from, to, wildcard = this.defaults.wildcard;\n    for(n = 0 ; n < transitions.length ; n++) {\n      transition = transitions[n];\n      from  = Array.isArray(transition.from) ? transition.from : [transition.from || wildcard]\n      to    = transition.to || wildcard;\n      for(i = 0 ; i < from.length ; i++) {\n        this.mapTransition({ name: transition.name, from: from[i], to: to });\n      }\n    }\n  },\n\n  transitionFor: function(state, transition) {\n    var wildcard = this.defaults.wildcard;\n    return this.map[state][transition] ||\n           this.map[wildcard][transition];\n  },\n\n  transitionsFor: function(state) {\n    var wildcard = this.defaults.wildcard;\n    return Object.keys(this.map[state]).concat(Object.keys(this.map[wildcard]));\n  },\n\n  allStates: function() {\n    return this.states;\n  },\n\n  allTransitions: function() {\n    return this.transitions;\n  }\n\n});\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = Config;\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar mixin      = __webpack_require__(0),\n    Exception  = __webpack_require__(6),\n    plugin     = __webpack_require__(1),\n    UNOBSERVED = [ null, [] ];\n\n//-------------------------------------------------------------------------------------------------\n\nfunction JSM(context, config) {\n  this.context   = context;\n  this.config    = config;\n  this.state     = config.init.from;\n  this.observers = [context];\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmixin(JSM.prototype, {\n\n  init: function(args) {\n    mixin(this.context, this.config.data.apply(this.context, args));\n    plugin.hook(this, 'init');\n    if (this.config.init.active)\n      return this.fire(this.config.init.name, []);\n  },\n\n  is: function(state) {\n    return Array.isArray(state) ? (state.indexOf(this.state) >= 0) : (this.state === state);\n  },\n\n  isPending: function() {\n    return this.pending;\n  },\n\n  can: function(transition) {\n    return !this.isPending() && !!this.seek(transition);\n  },\n\n  cannot: function(transition) {\n    return !this.can(transition);\n  },\n\n  allStates: function() {\n    return this.config.allStates();\n  },\n\n  allTransitions: function() {\n    return this.config.allTransitions();\n  },\n\n  transitions: function() {\n    return this.config.transitionsFor(this.state);\n  },\n\n  seek: function(transition, args) {\n    var wildcard = this.config.defaults.wildcard,\n        entry    = this.config.transitionFor(this.state, transition),\n        to       = entry && entry.to;\n    if (typeof to === 'function')\n      return to.apply(this.context, args);\n    else if (to === wildcard)\n      return this.state\n    else\n      return to\n  },\n\n  fire: function(transition, args) {\n    return this.transit(transition, this.state, this.seek(transition, args), args);\n  },\n\n  transit: function(transition, from, to, args) {\n\n    var lifecycle = this.config.lifecycle,\n        changed   = this.config.options.observeUnchangedState || (from !== to);\n\n    if (!to)\n      return this.context.onInvalidTransition(transition, from, to);\n\n    if (this.isPending())\n      return this.context.onPendingTransition(transition, from, to);\n\n    this.config.addState(to);  // might need to add this state if it's unknown (e.g. conditional transition or goto)\n\n    this.beginTransit();\n\n    args.unshift({             // this context will be passed to each lifecycle event observer\n      transition: transition,\n      from:       from,\n      to:         to,\n      fsm:        this.context\n    });\n\n    return this.observeEvents([\n                this.observersForEvent(lifecycle.onBefore.transition),\n                this.observersForEvent(lifecycle.onBefore[transition]),\n      changed ? this.observersForEvent(lifecycle.onLeave.state) : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onLeave[from]) : UNOBSERVED,\n                this.observersForEvent(lifecycle.on.transition),\n      changed ? [ 'doTransit', [ this ] ]                       : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onEnter.state) : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.onEnter[to])   : UNOBSERVED,\n      changed ? this.observersForEvent(lifecycle.on[to])        : UNOBSERVED,\n                this.observersForEvent(lifecycle.onAfter.transition),\n                this.observersForEvent(lifecycle.onAfter[transition]),\n                this.observersForEvent(lifecycle.on[transition])\n    ], args);\n  },\n\n  beginTransit: function()          { this.pending = true;                 },\n  endTransit:   function(result)    { this.pending = false; return result; },\n  failTransit:  function(result)    { this.pending = false; throw result;  },\n  doTransit:    function(lifecycle) { this.state = lifecycle.to;           },\n\n  observe: function(args) {\n    if (args.length === 2) {\n      var observer = {};\n      observer[args[0]] = args[1];\n      this.observers.push(observer);\n    }\n    else {\n      this.observers.push(args[0]);\n    }\n  },\n\n  observersForEvent: function(event) { // TODO: this could be cached\n    var n = 0, max = this.observers.length, observer, result = [];\n    for( ; n < max ; n++) {\n      observer = this.observers[n];\n      if (observer[event])\n        result.push(observer);\n    }\n    return [ event, result, true ]\n  },\n\n  observeEvents: function(events, args, previousEvent, previousResult) {\n    if (events.length === 0) {\n      return this.endTransit(previousResult === undefined ? true : previousResult);\n    }\n\n    var event     = events[0][0],\n        observers = events[0][1],\n        pluggable = events[0][2];\n\n    args[0].event = event;\n    if (event && pluggable && event !== previousEvent)\n      plugin.hook(this, 'lifecycle', args);\n\n    if (observers.length === 0) {\n      events.shift();\n      return this.observeEvents(events, args, event, previousResult);\n    }\n    else {\n      var observer = observers.shift(),\n          result = observer[event].apply(observer, args);\n      if (result && typeof result.then === 'function') {\n        return result.then(this.observeEvents.bind(this, events, args, event))\n                     .catch(this.failTransit.bind(this))\n      }\n      else if (result === false) {\n        return this.endTransit(false);\n      }\n      else {\n        return this.observeEvents(events, args, event, result);\n      }\n    }\n  },\n\n  onInvalidTransition: function(transition, from, to) {\n    throw new Exception(\"transition is invalid in current state\", transition, from, to, this.state);\n  },\n\n  onPendingTransition: function(transition, from, to) {\n    throw new Exception(\"transition is invalid while previous transition is still in progress\", transition, from, to, this.state);\n  }\n\n});\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = JSM;\n\n//-------------------------------------------------------------------------------------------------\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-----------------------------------------------------------------------------------------------\n\nvar mixin    = __webpack_require__(0),\n    camelize = __webpack_require__(2),\n    plugin   = __webpack_require__(1),\n    Config   = __webpack_require__(3),\n    JSM      = __webpack_require__(4);\n\n//-----------------------------------------------------------------------------------------------\n\nvar PublicMethods = {\n  is:                  function(state)       { return this._fsm.is(state)                                     },\n  can:                 function(transition)  { return this._fsm.can(transition)                               },\n  cannot:              function(transition)  { return this._fsm.cannot(transition)                            },\n  observe:             function()            { return this._fsm.observe(arguments)                            },\n  transitions:         function()            { return this._fsm.transitions()                                 },\n  allTransitions:      function()            { return this._fsm.allTransitions()                              },\n  allStates:           function()            { return this._fsm.allStates()                                   },\n  onInvalidTransition: function(t, from, to) { return this._fsm.onInvalidTransition(t, from, to)              },\n  onPendingTransition: function(t, from, to) { return this._fsm.onPendingTransition(t, from, to)              },\n}\n\nvar PublicProperties = {\n  state: {\n    configurable: false,\n    enumerable:   true,\n    get: function() {\n      return this._fsm.state;\n    },\n    set: function(state) {\n      throw Error('use transitions to change state')\n    }\n  }\n}\n\n//-----------------------------------------------------------------------------------------------\n\nfunction StateMachine(options) {\n  return apply(this || {}, options);\n}\n\nfunction factory() {\n  var cstor, options;\n  if (typeof arguments[0] === 'function') {\n    cstor   = arguments[0];\n    options = arguments[1] || {};\n  }\n  else {\n    cstor   = function() { this._fsm.apply(this, arguments) };\n    options = arguments[0] || {};\n  }\n  var config = new Config(options, StateMachine);\n  build(cstor.prototype, config);\n  cstor.prototype._fsm.config = config; // convenience access to shared config without needing an instance\n  return cstor;\n}\n\n//-------------------------------------------------------------------------------------------------\n\nfunction apply(instance, options) {\n  var config = new Config(options, StateMachine);\n  build(instance, config);\n  instance._fsm();\n  return instance;\n}\n\nfunction build(target, config) {\n  if ((typeof target !== 'object') || Array.isArray(target))\n    throw Error('StateMachine can only be applied to objects');\n  plugin.build(target, config);\n  Object.defineProperties(target, PublicProperties);\n  mixin(target, PublicMethods);\n  mixin(target, config.methods);\n  config.allTransitions().forEach(function(transition) {\n    target[camelize(transition)] = function() {\n      return this._fsm.fire(transition, [].slice.call(arguments))\n    }\n  });\n  target._fsm = function() {\n    this._fsm = new JSM(this, config);\n    this._fsm.init(arguments);\n  }\n}\n\n//-----------------------------------------------------------------------------------------------\n\nStateMachine.version  = '3.0.1';\nStateMachine.factory  = factory;\nStateMachine.apply    = apply;\nStateMachine.defaults = {\n  wildcard: '*',\n  init: {\n    name: 'init',\n    from: 'none'\n  }\n}\n\n//===============================================================================================\n\nmodule.exports = StateMachine;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function(message, transition, from, to, current) {\n  this.message    = message;\n  this.transition = transition;\n  this.from       = from;\n  this.to         = to;\n  this.current    = current;\n}\n\n\n/***/ })\n/******/ ]);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/javascript-state-machine/lib/state-machine.js\n// module id = 5\n// module chunks = 0","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"StateMachineHistory\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateMachineHistory\"] = factory();\n\telse\n\t\troot[\"StateMachineHistory\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nfunction camelize(label) {\n\n  if (label.length === 0)\n    return label;\n\n  var n, result, word, words = label.split(/[_-]/);\n\n  // single word with first character already lowercase, return untouched\n  if ((words.length === 1) && (words[0][0].toLowerCase() === words[0][0]))\n    return label;\n\n  result = words[0].toLowerCase();\n  for(n = 1 ; n < words.length ; n++) {\n    result = result + words[n].charAt(0).toUpperCase() + words[n].substring(1).toLowerCase();\n  }\n\n  return result;\n}\n\n//-------------------------------------------------------------------------------------------------\n\ncamelize.prepended = function(prepend, label) {\n  label = camelize(label);\n  return prepend + label[0].toUpperCase() + label.substring(1);\n}\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = camelize;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//-------------------------------------------------------------------------------------------------\n\nvar camelize = __webpack_require__(0);\n\n//-------------------------------------------------------------------------------------------------\n\nmodule.exports = function(options) { options = options || {};\n\n  var past       = camelize(options.name || options.past   || 'history'),\n      future     = camelize(                options.future || 'future'),\n      clear      = camelize.prepended('clear', past),\n      back       = camelize.prepended(past,   'back'),\n      forward    = camelize.prepended(past,   'forward'),\n      canBack    = camelize.prepended('can',   back),\n      canForward = camelize.prepended('can',   forward),\n      max        = options.max;\n\n  var plugin = {\n\n    configure: function(config) {\n      config.addTransitionLifecycleNames(back);\n      config.addTransitionLifecycleNames(forward);\n    },\n\n    init: function(instance) {\n      instance[past]   = [];\n      instance[future] = [];\n    },\n\n    lifecycle: function(instance, lifecycle) {\n      if (lifecycle.event === 'onEnterState') {\n        instance[past].push(lifecycle.to);\n        if (max && instance[past].length > max)\n          instance[past].shift();\n        if (lifecycle.transition !== back && lifecycle.transition !== forward)\n          instance[future].length = 0;\n      }\n    },\n\n    methods:    {},\n    properties: {}\n\n  }\n\n  plugin.methods[clear] = function() {\n    this[past].length = 0\n    this[future].length = 0\n  }\n\n  plugin.properties[canBack] = {\n    get: function() {\n      return this[past].length > 1\n    }\n  }\n\n  plugin.properties[canForward] = {\n    get: function() {\n      return this[future].length > 0\n    }\n  }\n\n  plugin.methods[back] = function() {\n    if (!this[canBack])\n      throw Error('no history');\n    var from = this[past].pop(),\n        to   = this[past].pop();\n    this[future].push(from);\n    this._fsm.transit(back, from, to, []);\n  }\n\n  plugin.methods[forward] = function() {\n    if (!this[canForward])\n      throw Error('no history');\n    var from = this.state,\n        to = this[future].pop();\n    this._fsm.transit(forward, from, to, []);\n  }\n\n  return plugin;\n\n}\n\n\n/***/ })\n/******/ ]);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/javascript-state-machine/lib/history.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}