!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("playkit-js")):"function"==typeof define&&define.amd?define(["playkit-js"],t):"object"==typeof exports?exports.ima=t(require("playkit-js")):(e.KalturaPlayer=e.KalturaPlayer||{},e.KalturaPlayer.plugins=e.KalturaPlayer.plugins||{},e.KalturaPlayer.plugins.ima=t(e.KalturaPlayer.core))}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={LOADING:"loading",LOADED:"loaded",PLAYING:"playing",PAUSED:"paused",IDLE:"idle",DONE:"done"};t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(4),u=i(d),l=n(5),c=i(l),h=n(1),f=i(h),p=n(0);n(9);var g=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"],_=function(e){function t(e,n,i){r(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return a._stateMachine=new c.default(a),a._initMembers(),a._addBindings(),a._init(),a}return a(t,e),o(t,null,[{key:"isValid",value:function(){return!0}}]),o(t,[{key:"playAdNow",value:function(e){this.logger.warn("playAdNow API is not implemented yet",e)}},{key:"skipAd",value:function(){this.logger.debug("Skip ad"),this._adsManager&&(this._adsManager.getAdSkippableState()?this._adsManager.skip():this.config.skipSupport&&this._adsManager.stop())}},{key:"resumeAd",value:function(){return this.logger.debug("Resume ad"),this._nextPromise=p.Utils.Object.defer(),this._adsManager.resume(),this._nextPromise}},{key:"pauseAd",value:function(){this.logger.debug("Pause ad"),this._adsManager.pause()}},{key:"getStateMachine",value:function(){return this._stateMachine}},{key:"getMiddlewareImpl",value:function(){return new u.default(this)}},{key:"reset",value:function(){this.logger.debug("reset"),this.eventManager.removeAll(),this._stopAdInterval(),this._hideAdsContainer(),this._isImaSDKLibLoaded()&&(this._adsManager&&this._adsManager.destroy(),this._adsLoader&&!this._contentComplete&&this._adsLoader.contentComplete(),this._initMembers(),this._addBindings(),this._adsLoader||this._initAdsLoader(),this._requestAds(),this.config.adTagUrl?this._stateMachine.loaded():this._stateMachine.goto(f.default.DONE))}},{key:"destroy",value:function(){this.logger.debug("destroy"),this.eventManager.destroy(),this._stopAdInterval(),this._hideAdsContainer(),this._adsManager&&this._adsManager.destroy(),this._adsLoader&&!this._contentComplete&&this._adsLoader.contentComplete(),this._adsLoader=null,this._initMembers()}},{key:"initialUserAction",value:function(){try{if(this.logger.debug("Initial user action"),this._nextPromise=p.Utils.Object.defer(),this._adDisplayContainer.initialize(),this._hasUserAction=!0,!this.config.adTagUrl&&!this.config.adsResponse)return this._resolveNextPromise(),this._nextPromise;this._isAdsManagerLoaded&&(this.logger.debug("User action occurred after ads manager loaded"),this._startAdsManager())}catch(e){this.logger.error(e),this.destroy()}return this._nextPromise}},{key:"_startAdsManager",value:function(){var e=this;this.logger.debug("Start ads manager"),(this._adsManager.isCustomPlaybackUsed()&&!this.config.disableMediaPreload?this.player.ready():Promise.resolve()).then(function(){e._adsManager.init(e.player.dimensions.width,e.player.dimensions.height,e._sdk.ViewMode.NORMAL),e._adsManager.start()})}},{key:"_addBindings",value:function(){var e=this;g.forEach(function(t){return e.eventManager.listen(document,t,function(){return e._resizeAd()})}),this.eventManager.listen(window,"resize",function(){return e._resizeAd()}),this.eventManager.listen(this.player,this.player.Event.MUTE_CHANGE,function(){return e._syncPlayerVolume()}),this.eventManager.listen(this.player,this.player.Event.VOLUME_CHANGE,function(){return e._syncPlayerVolume()}),this.eventManager.listen(this.player,this.player.Event.SOURCE_SELECTED,function(t){var n=t.payload.selectedSource;n&&n.length>0&&(e._contentSrc=n[0].url)})}},{key:"_initMembers",value:function(){this._setContentPlayheadTrackerEventsEnabled(!1),this._setVideoEndedCallbackEnabled(!1),this._nextPromise=null,this._currentAd=null,this._adsManager=null,this._contentComplete=!1,this._isAdsManagerLoaded=!1,this._intervalTimer=null,this._videoLastCurrentTime=null,this._contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this._hasUserAction=!1,this._togglePlayPauseOnAdsContainerCallback=null}},{key:"_init",value:function(){var e=this;this.loadPromise=p.Utils.Object.defer(),this._maybeDelayInitUntilSourceSelected().then(function(){return e._loadImaSDKLib()}).then(function(){e._sdk=window.google.ima,e.logger.debug("IMA SDK version: "+e._sdk.VERSION),e._initImaSettings(),e._initAdsContainer(),e._initAdsLoader(),e._requestAds(),e._stateMachine.loaded(),e.loadPromise.resolve()}).catch(function(t){e.loadPromise.reject(t)})}},{key:"_maybeDelayInitUntilSourceSelected",value:function(){var e=this;return this.config.delayInitUntilSourceSelected?new Promise(function(t,n){e._contentSrc?t():(e.eventManager.listenOnce(e.player,e.player.Event.SOURCE_SELECTED,t),e.eventManager.listenOnce(e.player,e.player.Event.ERROR,n))}):Promise.resolve()}},{key:"_loadImaSDKLib",value:function(){return this._isImaSDKLibLoaded()?Promise.resolve():p.Utils.Dom.loadScriptAsync(this.config.debug?t.IMA_SDK_DEBUG_LIB_URL:t.IMA_SDK_LIB_URL)}},{key:"_isImaSDKLibLoaded",value:function(){return window.google&&window.google.ima&&window.google.ima.VERSION}},{key:"_initImaSettings",value:function(){this._sdk.settings.setPlayerType(this.config.playerName),this._sdk.settings.setPlayerVersion(this.config.playerVersion),this._sdk.settings.setVpaidAllowed(!0),this._sdk.settings.setVpaidMode(this._sdk.ImaSdkSettings.VpaidMode.ENABLED),"boolean"==typeof this.config.setDisableCustomPlaybackForIOS10Plus?this._sdk.settings.setDisableCustomPlaybackForIOS10Plus(this.config.setDisableCustomPlaybackForIOS10Plus):this._sdk.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playback.playsinline)}},{key:"_initAdsContainer",value:function(){var e=this;this.logger.debug("Init ads container");var t=this.player.getView();this._adsContainerDiv=p.Utils.Dom.createElement("div"),this._adsContainerDiv.id="playkit-ads-container"+t.id,this._adsContainerDiv.className="playkit-ads-container",this._adsCoverDiv=p.Utils.Dom.createElement("div"),this._adsCoverDiv.id="playkit-ads-cover"+t.id,this._adsCoverDiv.className="playkit-ads-cover",this._adsCoverDiv.onclick=function(){return e._onAdsCoverClicked()},p.Utils.Dom.appendChild(t,this._adsContainerDiv),this._adDisplayContainer=new this._sdk.AdDisplayContainer(this._adsContainerDiv,this.player.getVideoElement())}},{key:"_initAdsLoader",value:function(){var e=this;this.logger.debug("Init ads loader"),this._adsLoader=new this._sdk.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(this._sdk.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){return e._onAdsManagerLoaded(t)}),this._adsLoader.addEventListener(this._sdk.AdErrorEvent.Type.AD_ERROR,function(t){return e._stateMachine.aderror(t)})}},{key:"_requestAds",value:function(){var e=this;if(this.config.adTagUrl||this.config.adsResponse){this.logger.debug("Request ads");var t=new this._sdk.AdsRequest;this.config.adTagUrl?t.adTagUrl=this.config.adTagUrl:t.adsResponse=this.config.adsResponse,t.linearAdSlotWidth=this.player.dimensions.width,t.linearAdSlotHeight=this.player.dimensions.height,t.nonLinearAdSlotWidth=this.player.dimensions.width,t.nonLinearAdSlotHeight=this.player.dimensions.height/3;var n=this.player.muted||0===this.player.volume;t.setAdWillPlayMuted(n);var i=this.config.adWillAutoPlay,r=this.player.config.playback.autoplay,s=this.player.config.playback.allowMutedAutoPlay;"boolean"==typeof i?(t.setAdWillAutoPlay(i),this._adsLoader.requestAds(t)):r?(0,p.getCapabilities)(p.EngineType.HTML5).then(function(n){e._adsLoader&&(n.autoplay?t.setAdWillAutoPlay(!0):s&&n.mutedAutoPlay?(t.setAdWillAutoPlay(!0),t.setAdWillPlayMuted(!0)):t.setAdWillAutoPlay(!1),e._adsLoader.requestAds(t))}):(t.setAdWillAutoPlay(!1),this._adsLoader.requestAds(t))}else this.logger.warn("Missing ad tag url: create plugin without requesting ads")}},{key:"_resizeAd",value:function(){if(this._sdk&&this._adsManager&&this._currentAd){var e=this.player.isFullscreen()?this._sdk.ViewMode.FULLSCREEN:this._sdk.ViewMode.NORMAL;this._currentAd.isLinear()?this._adsManager.resize(this.player.dimensions.width,this.player.dimensions.height,e):(this._alignAdsContainerSizeForOverlayAd(),this._adsManager.resize(this._currentAd.getWidth()+8,this._currentAd.getHeight()+8,e))}}},{key:"_alignAdsContainerSizeForOverlayAd",value:function(){this._adsContainerDiv.style.bottom=this._currentAd.getHeight()+8+"px",this._adsContainerDiv.style.left=(this.player.dimensions.width-this._currentAd.getWidth())/2+"px"}},{key:"_onLoadedMetadata",value:function(){this._contentPlayheadTracker.duration=this.player.duration}},{key:"_onMediaTimeUpdate",value:function(){this._contentPlayheadTracker.seeking||(this._contentPlayheadTracker.previousTime=this._contentPlayheadTracker.currentTime,this._contentPlayheadTracker.currentTime=this.player.currentTime)}},{key:"_setContentPlayheadTrackerEventsEnabled",value:function(e){var t=this;e?(this.eventManager.listen(this.player,this.player.Event.LOADED_METADATA,function(){return t._onLoadedMetadata()}),this.eventManager.listen(this.player,this.player.Event.TIME_UPDATE,function(){return t._onMediaTimeUpdate()}),this.eventManager.listen(this.player,this.player.Event.SEEKING,function(){return t._onMediaSeeking()}),this.eventManager.listen(this.player,this.player.Event.SEEKED,function(){return t._onMediaSeeked()})):(this.eventManager.unlisten(this.player,this.player.Event.LOADED_METADATA),this.eventManager.unlisten(this.player,this.player.Event.TIME_UPDATE),this.eventManager.unlisten(this.player,this.player.Event.SEEKING),this.eventManager.unlisten(this.player,this.player.Event.SEEKED))}},{key:"_onMediaSeeking",value:function(){this._contentPlayheadTracker.seeking=!0}},{key:"_onMediaSeeked",value:function(){this._contentPlayheadTracker.seeking=!1}},{key:"_setVideoEndedCallbackEnabled",value:function(e){var t=this;e?this.eventManager.listen(this.player,this.player.Event.ENDED,function(){return t._onMediaEnded()}):this.eventManager.unlisten(this.player,this.player.Event.ENDED)}},{key:"_maybeSaveVideoCurrentTime",value:function(){this._adsManager.isCustomPlaybackUsed()&&this.player.currentTime&&this.player.currentTime>0&&(this.logger.debug("Custom playback used: save current time before ads",this.player.currentTime),this._videoLastCurrentTime=this.player.currentTime)}},{key:"_maybeSetVideoCurrentTime",value:function(){this._videoLastCurrentTime&&(this.logger.debug("Custom playback used: set current time after ads",this._videoLastCurrentTime),this.player.currentTime=this._videoLastCurrentTime,this._videoLastCurrentTime=null)}},{key:"_onMediaEnded",value:function(){this.logger.debug("Media ended"),this._adsLoader.contentComplete(),this._contentComplete=!0,this._currentAd.isLinear()||this.destroy()}},{key:"_showAdsContainer",value:function(){this._adsContainerDiv&&(this._adsContainerDiv.style.visibility="visible")}},{key:"_hideAdsContainer",value:function(){this._adsContainerDiv&&(this._adsContainerDiv.style.visibility="hidden")}},{key:"_onAdsManagerLoaded",value:function(e){this.logger.debug("Ads manager loaded");var t=this._getAdsRenderingSetting();this._adsManager=e.getAdsManager(this._contentPlayheadTracker,t),this._isAdsManagerLoaded=!0,this._attachAdsManagerListeners(),this._syncPlayerVolume(),this._hasUserAction&&(this.logger.debug("User action occurred before ads manager loaded"),this._startAdsManager())}},{key:"_getAdsRenderingSetting",value:function(){var e=this,t=new this._sdk.AdsRenderingSettings;return Object.keys(this.config.adsRenderingSettings).forEach(function(n){void 0!==t[n]?t[n]=e.config.adsRenderingSettings[n]:e.logger.warn("unsupported adsRenderingSettings was set:",n)}),this.config.disableMediaPreload&&(t.restoreCustomPlaybackStateOnAdBreakComplete=!1),t}},{key:"_attachAdsManagerListeners",value:function(){var e=this;this._adsManager.addEventListener(this._sdk.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){return e._stateMachine.adbreakstart(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.LOADED,function(t){return e._stateMachine.adloaded(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.STARTED,function(t){return e._stateMachine.adstarted(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.PAUSED,function(t){return e._stateMachine.adpaused(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.RESUMED,function(t){return e._stateMachine.adresumed(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.FIRST_QUARTILE,function(t){return e._stateMachine.adfirstquartile(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.MIDPOINT,function(t){return e._stateMachine.admidpoint(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.THIRD_QUARTILE,function(t){return e._stateMachine.adthirdquartile(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.CLICK,function(t){return e._stateMachine.adclicked(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.SKIPPED,function(t){return e._stateMachine.adskipped(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.COMPLETE,function(t){return e._stateMachine.adcompleted(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){return e._stateMachine.adbreakend(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.ALL_ADS_COMPLETED,function(t){return e._stateMachine.alladscompleted(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.USER_CLOSE,function(t){return e._stateMachine.userclosedad(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.VOLUME_CHANGED,function(t){return e._stateMachine.advolumechanged(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.VOLUME_MUTED,function(t){return e._stateMachine.admuted(t)}),this._adsManager.addEventListener(this._sdk.AdEvent.Type.LOG,function(t){return e._stateMachine.aderror(t)}),this._adsManager.addEventListener(this._sdk.AdErrorEvent.Type.AD_ERROR,function(t){return e._stateMachine.aderror(t)})}},{key:"_syncPlayerVolume",value:function(){this._adsManager&&(this.player.muted?this._adsManager.setVolume(0):this._adsManager&&"number"==typeof this.player.volume&&this.player.volume!==this._adsManager.getVolume()&&this._adsManager.setVolume(this.player.volume))}},{key:"_startAdInterval",value:function(){var e=this;this._stopAdInterval(),this._intervalTimer=setInterval(function(){if(e._stateMachine.is(f.default.PLAYING)){var t=e._adsManager.getRemainingTime(),n=e._adsManager.getCurrentAd().getDuration(),i=n-t;p.Utils.Number.isNumber(n)&&p.Utils.Number.isNumber(i)&&e.dispatchEvent(e.player.Event.AD_PROGRESS,{adProgress:{currentTime:i,duration:n}})}},300)}},{key:"_stopAdInterval",value:function(){this._intervalTimer&&(clearInterval(this._intervalTimer),this._intervalTimer=null)}},{key:"_resolveNextPromise",value:function(){this._nextPromise&&(this._nextPromise.resolve(),this._nextPromise=null)}},{key:"_setToggleAdsCover",value:function(e){e?this._adsManager.isCustomPlaybackUsed()||(this._adsContainerDiv.appendChild(this._adsCoverDiv),this._isAdsCoverActive=!0):this._isAdsCoverActive&&(this._adsContainerDiv.removeChild(this._adsCoverDiv),this._isAdsCoverActive=!1)}},{key:"_onAdsCoverClicked",value:function(){if(this._adsManager)switch(this._stateMachine.state){case f.default.PAUSED:this._adsManager.resume();break;case f.default.PLAYING:this._adsManager.pause()}}},{key:"_maybeDisplayCompanionAds",value:function(){if(this.config.companions&&this.config.companions.ads&&!window.googletag){var e=new this._sdk.CompanionAdSelectionSettings;e.resourceType=this._sdk.CompanionAdSelectionSettings.ResourceType.ALL,e.creativeType=this._sdk.CompanionAdSelectionSettings.CreativeType.ALL;var t=this.config.companions.sizeCriteria;e.sizeCriteria=this._sdk.CompanionAdSelectionSettings.SizeCriteria[t]||this._sdk.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH;for(var n=Object.keys(this.config.companions.ads),i=0;i<n.length;i++){var r=n[i],s=this.config.companions.ads[r],a=s.width,o=s.height,d=this._currentAd.getCompanionAds(a,o,e);if(d.length>0){var u=d[0],l=u.getContent(),c=p.Utils.Dom.getElementById(r);c&&(c.innerHTML=l)}}}}},{key:"_maybeIgnoreClickOnAd",value:function(){var e=this;(function(){return"Android"===e.player.env.os.name})()&&function(){return"Chrome"===e.player.env.browser.name}()&&this.eventManager.listenOnce(this.player.getView(),"click",function(e){return e.stopPropagation()})}},{key:"_maybeForceExitFullScreen",value:function(){var e=this;(function(){return"iOS"===e.player.env.os.name})()&&!this._adsManager.isCustomPlaybackUsed()&&this.player.isFullscreen()&&this.player.exitFullscreen()}}]),t}(p.BasePlugin);_.defaultConfig={debug:!1,delayInitUntilSourceSelected:!1,disableMediaPreload:!1,adsRenderingSettings:{restoreCustomPlaybackStateOnAdBreakComplete:!0,enablePreloading:!1,useStyledLinearAds:!1,useStyledNonLinearAds:!0,bitrate:-1,autoAlign:!0},companions:{ads:null,sizeCriteria:"SELECT_EXACT_MATCH"}},_.IMA_SDK_LIB_URL="//imasdk.googleapis.com/js/sdkloader/ima3.js",_.IMA_SDK_DEBUG_LIB_URL="//imasdk.googleapis.com/js/sdkloader/ima3_debug.js",t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAME=t.VERSION=void 0;var i=n(0),r=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=s.default,t.VERSION="0.6.1",t.NAME="playkit-js-ima";(0,i.registerPlugin)("ima",s.default)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(0),u=n(2),l=(i(u),n(1)),c=i(l),h=function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.id="ImaMiddleware",n._context=e,e.player.addEventListener(e.player.Event.CHANGE_SOURCE_STARTED,function(){return n._isPlayerLoaded=!1}),n}return a(t,e),o(t,[{key:"play",value:function(e){var t=this;this._isPlayerLoaded||this._context.config.disableMediaPreload||this._loadPlayer(),this._context.loadPromise.then(function(){switch(t._context.getStateMachine().state){case c.default.PLAYING:break;case c.default.LOADED:var n=t._context.initialUserAction();if(n)return n.then(function(){t.callNext(e)});t.callNext(e);break;case c.default.PAUSED:var i=t._context.resumeAd();if(i)return i.then(function(){t.callNext(e)});t.callNext(e);break;default:t.callNext(e)}}).catch(function(n){t._context.destroy(),t._context.logger.error(n),t.callNext(e)})}},{key:"pause",value:function(e){switch(this._context.getStateMachine().state){case c.default.PAUSED:break;case c.default.PLAYING:this._context.pauseAd();break;default:this.callNext(e)}}},{key:"_loadPlayer",value:function(){var e=this,t=function(){e._context.logger.debug("Load player by ima middleware"),e._context.player.load(),e._isPlayerLoaded=!0};this._context.player.engineType?t():this._context.player.addEventListener(this._context.player.Event.SOURCE_SELECTED,function(){return t()})}}]),t}(d.BaseMiddleware);t.default=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){this.logger.debug(t.type.toUpperCase()),T.Utils.Dom.setAttribute(this._adsContainerDiv,"data-adtype",m(t)),this._adsManager.isCustomPlaybackUsed()&&this.player.hideTextTrack(),this.dispatchEvent(e.transition,y(t))}function a(e,t){this.logger.debug(t.type.toUpperCase()),this._currentAd=t.getAd(),this._resizeAd(),this._showAdsContainer(),this._maybeDisplayCompanionAds(),this._currentAd.isLinear()?(this._setContentPlayheadTrackerEventsEnabled(!1),this._startAdInterval()):(this._setContentPlayheadTrackerEventsEnabled(!0),this._setVideoEndedCallbackEnabled(!0),this._nextPromise?this._resolveNextPromise():this.player.play()),this.dispatchEvent(e.transition)}function o(e,t){this.logger.debug(t.type.toUpperCase()),this._currentAd.isLinear()?(this._maybeIgnoreClickOnAd(),this._stateMachine.is(k.default.PLAYING)&&this._adsManager.pause(),this._setToggleAdsCover(!0)):this.player.paused||this.player.pause(),this.dispatchEvent(e.transition)}function d(e,t){this.logger.debug(t.type.toUpperCase()),this._setToggleAdsCover(!1),this.dispatchEvent(e.transition)}function u(e,t){this.logger.debug(t.type.toUpperCase()),this._currentAd.isLinear()&&this._stopAdInterval(),this._currentAd=null,this.dispatchEvent(e.transition)}function l(e,t){this.logger.debug(t.type.toUpperCase()),this._adsManager.isCustomPlaybackUsed()&&this._contentComplete&&(this.player.getVideoElement().src=this._contentSrc),h.call(this,e,t)}function c(e,t){this.logger.debug(t.type.toUpperCase()),this.player.pause(),this._setVideoEndedCallbackEnabled(!1),this._maybeForceExitFullScreen(),this._maybeSaveVideoCurrentTime(),this.dispatchEvent(e.transition)}function h(e,t){this.logger.debug(t.type.toUpperCase()),this._setVideoEndedCallbackEnabled(!0),this._setContentPlayheadTrackerEventsEnabled(!0),this._contentComplete||(this._hideAdsContainer(),this._maybeSetVideoCurrentTime(),this._nextPromise?this._resolveNextPromise():this.player.play()),this.dispatchEvent(e.transition)}function f(e,t){if("adError"===t.type){this.logger.debug(t.type.toUpperCase());var n=t.getError();this.loadPromise&&this.loadPromise.reject(n),this._nextPromise&&this._nextPromise.reject(n),this.dispatchEvent(e.transition,v(n,!0))}else{this.logger.debug(t.type.toUpperCase());var i=t.getAdData(),r=i.adError;i.adError&&(this.logger.error("Non-fatal error occurred: "+r.getMessage()),this.dispatchEvent(this.player.Event.AD_ERROR,v(r,!1)))}}function p(e,t){this.logger.debug(t.type.toUpperCase()),this._stopAdInterval(),this.dispatchEvent(e.transition)}function g(e,t){this.logger.debug(t.type.toUpperCase()),this.dispatchEvent(e.transition)}function _(e){e.from!==e.to&&this.logger.debug("Change state: "+e.from+" => "+e.to)}function v(e,t){return{fatal:t,error:{code:e.getErrorCode(),message:e.getMessage()}}}function y(e){return{ad:e.getAd(),adType:m(e),extraAdData:e.getAdData()}}function m(e){var t=e.getAd(),n=t.getAdPodInfo(),i=n.getPodIndex();if(!t.isLinear())return P.default.OVERLAY;switch(i){case 0:return P.default.PRE_ROLL;case-1:return P.default.POST_ROLL;default:return P.default.MID_ROLL}}Object.defineProperty(t,"__esModule",{value:!0});var E=n(6),A=i(E),b=n(7),L=i(b),M=n(1),k=i(M),D=n(8),P=i(D),T=n(0),C=function e(t){return r(this,e),new A.default({init:k.default.LOADING,transitions:[{name:"loaded",from:[k.default.LOADING,k.default.LOADED,k.default.IDLE,k.default.PAUSED,k.default.PLAYING,k.default.DONE],to:k.default.LOADED},{name:t.player.Event.AD_STARTED,from:[k.default.LOADED,k.default.IDLE,k.default.PAUSED,k.default.PLAYING],to:function(e){return e.getAd().isLinear()?k.default.PLAYING:k.default.IDLE}},{name:t.player.Event.AD_RESUMED,from:k.default.PAUSED,to:k.default.PLAYING},{name:t.player.Event.AD_PAUSED,from:k.default.PLAYING,to:k.default.PAUSED},{name:t.player.Event.AD_SKIPPED,from:[k.default.PLAYING,k.default.PAUSED],to:k.default.IDLE},{name:t.player.Event.AD_COMPLETED,from:k.default.PLAYING},{name:t.player.Event.ALL_ADS_COMPLETED,from:k.default.IDLE,to:k.default.DONE},{name:t.player.Event.AD_BREAK_END,from:[k.default.IDLE,k.default.PLAYING,k.default.LOADED],to:k.default.IDLE},{name:t.player.Event.AD_ERROR,from:[k.default.IDLE,k.default.LOADED,k.default.PLAYING,k.default.PAUSED,k.default.LOADING],to:k.default.IDLE},{name:t.player.Event.AD_LOADED,from:[k.default.IDLE,k.default.LOADED,k.default.PLAYING]},{name:t.player.Event.AD_FIRST_QUARTILE,from:k.default.PLAYING},{name:t.player.Event.AD_BREAK_START,from:[k.default.IDLE,k.default.LOADED]},{name:t.player.Event.AD_MIDPOINT,from:k.default.PLAYING},{name:t.player.Event.AD_THIRD_QUARTILE,from:k.default.PLAYING},{name:t.player.Event.USER_CLOSED_AD,from:[k.default.IDLE,k.default.PLAYING,k.default.PAUSED]},{name:t.player.Event.AD_VOLUME_CHANGED,from:[k.default.PLAYING,k.default.PAUSED,k.default.LOADED]},{name:t.player.Event.AD_MUTED,from:[k.default.PLAYING,k.default.PAUSED,k.default.LOADED]},{name:t.player.Event.AD_CLICKED,from:[k.default.PLAYING,k.default.PAUSED,k.default.IDLE]},{name:"goto",from:"*",to:function(e){return e}}],methods:{onAdloaded:s.bind(t),onAdstarted:a.bind(t),onAdpaused:g.bind(t),onAdresumed:d.bind(t),onAdclicked:o.bind(t),onAdskipped:p.bind(t),onAdcompleted:u.bind(t),onAlladscompleted:l.bind(t),onAdbreakstart:c.bind(t),onAdbreakend:h.bind(t),onAdfirstquartile:g.bind(t),onAdmidpoint:g.bind(t),onAdthirdquartile:g.bind(t),onAderror:f.bind(t),onUserclosedad:g.bind(t),onAdvolumechanged:g.bind(t),onAdmuted:g.bind(t),onEnterState:_.bind(t)},plugins:[new L.default]})};t.default=C},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";e.exports=function(e,t){var n,i,r;for(n=1;n<arguments.length;n++){i=arguments[n];for(r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}},function(e,t,n){"use strict";var i=n(0);e.exports={build:function(e,t){var n,r,s,a=t.plugins;for(n=0,r=a.length;n<r;n++)s=a[n],s.methods&&i(e,s.methods),s.properties&&Object.defineProperties(e,s.properties)},hook:function(e,t,n){var i,r,s,a,o=e.config.plugins,d=[e.context];for(n&&(d=d.concat(n)),i=0,r=o.length;i<r;i++)a=o[i],(s=o[i][t])&&s.apply(a,d)}}},function(e,t,n){"use strict";function i(e){if(0===e.length)return e;var t,n,i=e.split(/[_-]/);if(1===i.length&&i[0][0].toLowerCase()===i[0][0])return e;for(n=i[0].toLowerCase(),t=1;t<i.length;t++)n=n+i[t].charAt(0).toUpperCase()+i[t].substring(1).toLowerCase();return n}i.prepended=function(e,t){return t=i(t),e+t[0].toUpperCase()+t.substring(1)},e.exports=i},function(e,t,n){"use strict";function i(e,t){e=e||{},this.options=e,this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}var r=n(0),s=n(2);r(i.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=s.prepended("onEnter",e),this.lifecycle.onLeave[e]=s.prepended("onLeave",e),this.lifecycle.on[e]=s.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=s.prepended("onBefore",e),this.lifecycle.onAfter[e]=s.prepended("onAfter",e),this.lifecycle.on[e]=s.prepended("on",e)},mapTransition:function(e){var t=e.name,n=e.from,i=e.to;return this.addState(n),"function"!=typeof i&&this.addState(i),this.addTransition(t),this.map[n][t]=e,e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(r({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(r({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){e=e||[];var n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],"function"==typeof r&&(e[n]=r=r()),r.configure&&r.configure(this);return e},configureTransitions:function(e){var t,n,i,r,s,a=this.defaults.wildcard;for(n=0;n<e.length;n++)for(i=e[n],r=Array.isArray(i.from)?i.from:[i.from||a],s=i.to||a,t=0;t<r.length;t++)this.mapTransition({name:i.name,from:r[t],to:s})},transitionFor:function(e,t){var n=this.defaults.wildcard;return this.map[e][t]||this.map[n][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=i},function(e,t,n){function i(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}var r=n(0),s=n(6),a=n(1),o=[null,[]];r(i.prototype,{init:function(e){if(r(this.context,this.config.data.apply(this.context,e)),a.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?e.indexOf(this.state)>=0:this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var n=this.config.defaults.wildcard,i=this.config.transitionFor(this.state,e),r=i&&i.to;return"function"==typeof r?r.apply(this.context,t):r===n?this.state:r},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,n,i){var r=this.config.lifecycle,s=this.config.options.observeUnchangedState||t!==n;return n?this.isPending()?this.context.onPendingTransition(e,t,n):(this.config.addState(n),this.beginTransit(),i.unshift({transition:e,from:t,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(r.onBefore.transition),this.observersForEvent(r.onBefore[e]),s?this.observersForEvent(r.onLeave.state):o,s?this.observersForEvent(r.onLeave[t]):o,this.observersForEvent(r.on.transition),s?["doTransit",[this]]:o,s?this.observersForEvent(r.onEnter.state):o,s?this.observersForEvent(r.onEnter[n]):o,s?this.observersForEvent(r.on[n]):o,this.observersForEvent(r.onAfter.transition),this.observersForEvent(r.onAfter[e]),this.observersForEvent(r.on[e])],i)):this.context.onInvalidTransition(e,t,n)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,n=0,i=this.observers.length,r=[];n<i;n++)t=this.observers[n],t[e]&&r.push(t);return[e,r,!0]},observeEvents:function(e,t,n,i){if(0===e.length)return this.endTransit(void 0===i||i);var r=e[0][0],s=e[0][1],o=e[0][2];if(t[0].event=r,r&&o&&r!==n&&a.hook(this,"lifecycle",t),0===s.length)return e.shift(),this.observeEvents(e,t,r,i);var d=s.shift(),u=d[r].apply(d,t);return u&&"function"==typeof u.then?u.then(this.observeEvents.bind(this,e,t,r)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(e,t,r,u)},onInvalidTransition:function(e,t,n){throw new s("transition is invalid in current state",e,t,n,this.state)},onPendingTransition:function(e,t,n){throw new s("transition is invalid while previous transition is still in progress",e,t,n,this.state)}}),e.exports=i},function(e,t,n){"use strict";function i(e){return s(this||{},e)}function r(){var e,t;"function"==typeof arguments[0]?(e=arguments[0],t=arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},t=arguments[0]||{});var n=new l(t,i);return a(e.prototype,n),e.prototype._fsm.config=n,e}function s(e,t){return a(e,new l(t,i)),e._fsm(),e}function a(e,t){if("object"!=typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");u.build(e,t),Object.defineProperties(e,f),o(e,h),o(e,t.methods),t.allTransitions().forEach(function(t){e[d(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}}),e._fsm=function(){this._fsm=new c(this,t),this._fsm.init(arguments)}}var o=n(0),d=n(2),u=n(1),l=n(3),c=n(4),h={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,n){return this._fsm.onInvalidTransition(e,t,n)},onPendingTransition:function(e,t,n){return this._fsm.onPendingTransition(e,t,n)}},f={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};i.version="3.0.1",i.factory=r,i.apply=s,i.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){this.message=e,this.transition=t,this.from=n,this.to=i,this.current=r}}])})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function i(e){if(0===e.length)return e;var t,n,i=e.split(/[_-]/);if(1===i.length&&i[0][0].toLowerCase()===i[0][0])return e;for(n=i[0].toLowerCase(),t=1;t<i.length;t++)n=n+i[t].charAt(0).toUpperCase()+i[t].substring(1).toLowerCase();return n}i.prepended=function(e,t){return t=i(t),e+t[0].toUpperCase()+t.substring(1)},e.exports=i},function(e,t,n){"use strict";var i=n(0);e.exports=function(e){e=e||{};var t=i(e.name||e.past||"history"),n=i(e.future||"future"),r=i.prepended("clear",t),s=i.prepended(t,"back"),a=i.prepended(t,"forward"),o=i.prepended("can",s),d=i.prepended("can",a),u=e.max,l={configure:function(e){e.addTransitionLifecycleNames(s),e.addTransitionLifecycleNames(a)},init:function(e){e[t]=[],e[n]=[]},lifecycle:function(e,i){"onEnterState"===i.event&&(e[t].push(i.to),u&&e[t].length>u&&e[t].shift(),i.transition!==s&&i.transition!==a&&(e[n].length=0))},methods:{},properties:{}};return l.methods[r]=function(){this[t].length=0,this[n].length=0},l.properties[o]={get:function(){return this[t].length>1}},l.properties[d]={get:function(){return this[n].length>0}},l.methods[s]=function(){if(!this[o])throw Error("no history");var e=this[t].pop(),i=this[t].pop();this[n].push(e),this._fsm.transit(s,e,i,[])},l.methods[a]=function(){if(!this[d])throw Error("no history");var e=this.state,t=this[n].pop();this._fsm.transit(a,e,t,[])},l}}])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={PRE_ROLL:"preroll",MID_ROLL:"midroll",POST_ROLL:"postroll",OVERLAY:"overlay"};t.default=i},function(e,t,n){var i=n(10);"string"==typeof i&&(i=[[e.i,i,""]]);var r={};r.transform=void 0;n(12)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(11)(void 0),t.push([e.i,".playkit-ads-cover {\n  position: fixed;\n  cursor: pointer;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.playkit-ads-container {\n  visibility: hidden;\n  position: absolute;\n}\n",""])},function(e,t){function n(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var s=i(r);return[n].concat(r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"})).concat([s]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=p[i.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](i.parts[s]);for(;s<i.parts.length;s++)r.parts.push(l(i.parts[s],t))}else{for(var a=[],s=0;s<i.parts.length;s++)a.push(l(i.parts[s],t));p[i.id]={id:i.id,refs:1,parts:a}}}}function r(e,t){for(var n=[],i={},r=0;r<e.length;r++){var s=e[r],a=t.base?s[0]+t.base:s[0],o=s[1],d=s[2],u=s[3],l={css:o,media:d,sourceMap:u};i[a]?i[a].parts.push(l):n.push(i[a]={id:a,parts:[l]})}return n}function s(e,t){var n=_(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=m[m.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),m.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=m.indexOf(e);t>=0&&m.splice(t,1)}function o(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),s(e,t),t}function d(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),s(e,t),t}function u(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function l(e,t){var n,i,r,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var u=y++;n=v||(v=o(t)),i=c.bind(null,n,u,!1),r=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=d(t),i=f.bind(null,n,t),r=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(t),i=h.bind(null,n),r=function(){a(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function c(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=A(t,r);else{var s=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function h(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t,n){var i=n.css,r=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||s)&&(i=E(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var p={},g=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),_=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),v=null,y=0,m=[],E=n(13);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=r(e,t);return i(n,t),function(e){for(var s=[],a=0;a<n.length;a++){var o=n[a],d=p[o.id];d.refs--,s.push(d)}if(e){i(r(e,t),t)}for(var a=0;a<s.length;a++){var d=s[a];if(0===d.refs){for(var u=0;u<d.parts.length;u++)d.parts[u]();delete p[d.id]}}}};var A=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r))return e;var s;return s=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(s)+")"})}}])});
//# sourceMappingURL=playkit-ima.js.map